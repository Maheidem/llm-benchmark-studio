import{b as n,c as a,d as o,l as u,t as i,F as A,A as k,e as j,f as F,B as _,o as R,i as D,j as J,y as N,C as T,K as V,r as w,a as $,k as L}from"./index-BMBAIBBO.js";import{u as M}from"./judge-1xB6xlQR.js";const q={key:0,class:"space-y-6"},O={class:"card rounded-md p-5"},U={class:"grid grid-cols-2 gap-6"},E={class:"text-center"},H={class:"text-[10px] text-zinc-600 font-body mt-1"},K={class:"text-center"},P={class:"text-[10px] text-zinc-600 font-body mt-1"},G={class:"text-center mt-3"},Q={class:"text-xs font-mono text-zinc-200 mb-3"},W={class:"grid grid-cols-2 gap-4"},X={class:"flex items-center gap-2 mb-2"},Y={key:0,class:"mb-1"},Z={key:1},I={key:1,class:"text-xs text-zinc-600 font-body text-center py-8"},ee={__name:"JudgeCompareView",props:{reportA:{type:Object,default:null},reportB:{type:Object,default:null}},setup(r){const l=r,v=_(()=>p(l.reportA)),x=_(()=>p(l.reportB)),y=_(()=>{const e=new Set(v.value.map(t=>t.model_id||t.model_name)),s=new Set(x.value.map(t=>t.model_id||t.model_name)),d=new Set([...e,...s]);return Array.from(d)}),g=_(()=>{if(!l.reportA||!l.reportB)return"#71717A";const e=(l.reportA.overall_score||0)-(l.reportB.overall_score||0);return e>0?"var(--lime)":e<0?"var(--coral)":"#FBBF24"}),B=_(()=>{if(!l.reportA||!l.reportB)return"";const e=(l.reportA.overall_score||0)-(l.reportB.overall_score||0);return e>0?`A is +${e} points ahead`:e<0?`B is +${Math.abs(e)} points ahead`:"Tied"});function p(e){if(!e)return[];if(e._reports)return e._reports;if(e.report_json)try{return typeof e.report_json=="string"?JSON.parse(e.report_json):e.report_json}catch{return[]}return[]}function c(e,s){return e.find(d=>(d.model_id||d.model_name)===s)||null}function f(e){return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}function m(e){if(!e)return"#71717A";const s=e.charAt(0).toUpperCase();return s==="A"?"var(--lime)":s==="B"?"#60A5FA":s==="C"?"#FBBF24":s==="D"?"#F97316":"var(--coral)"}function h(e){return e>=80?"var(--lime)":e>=60?"#60A5FA":e>=40?"#FBBF24":"var(--coral)"}return(e,s)=>r.reportA&&r.reportB?(n(),a("div",q,[o("div",O,[s[2]||(s[2]=o("span",{class:"section-label mb-3 block"},"Side-by-Side Comparison",-1)),o("div",U,[o("div",E,[s[0]||(s[0]=o("div",{class:"text-[10px] text-zinc-600 font-display tracking-wider uppercase mb-1"},"Report A",-1)),o("div",{class:"text-2xl font-display font-bold",style:u({color:m(r.reportA.overall_grade)})},i(r.reportA.overall_grade||"?"),5),o("div",{class:"text-sm font-mono",style:u({color:h(r.reportA.overall_score||0)})},i(r.reportA.overall_score||0)+"/100 ",5),o("div",H,i(f(r.reportA.timestamp||r.reportA.created_at)),1)]),o("div",K,[s[1]||(s[1]=o("div",{class:"text-[10px] text-zinc-600 font-display tracking-wider uppercase mb-1"},"Report B",-1)),o("div",{class:"text-2xl font-display font-bold",style:u({color:m(r.reportB.overall_grade)})},i(r.reportB.overall_grade||"?"),5),o("div",{class:"text-sm font-mono",style:u({color:h(r.reportB.overall_score||0)})},i(r.reportB.overall_score||0)+"/100 ",5),o("div",P,i(f(r.reportB.timestamp||r.reportB.created_at)),1)])]),o("div",G,[o("span",{class:"text-sm font-mono font-bold",style:u({color:g.value})},i(B.value),5)])]),(n(!0),a(A,null,k(y.value,d=>(n(),a("div",{key:d,class:"card rounded-md p-5"},[o("div",Q,i(d),1),o("div",W,[(n(!0),a(A,null,k([c(v.value,d),c(x.value,d)],(t,C)=>{var S,z;return n(),a("div",{key:C,class:j(["rounded-sm px-3 py-2",C===0?"border-l-2 border-blue-400/30":"border-l-2 border-purple-400/30"])},[o("div",X,[o("span",{class:"text-sm font-display font-bold",style:u({color:m(t==null?void 0:t.overall_grade)})},i((t==null?void 0:t.overall_grade)||"?"),5),o("span",{class:"text-xs font-mono",style:u({color:h((t==null?void 0:t.overall_score)||0)})},i((t==null?void 0:t.overall_score)||0)+"/100 ",5)]),(S=t==null?void 0:t.strengths)!=null&&S.length?(n(),a("div",Y,[(n(!0),a(A,null,k(t.strengths.slice(0,2),b=>(n(),a("span",{key:b,class:"text-[10px] text-lime-400/70 font-body block"},"+ "+i(b),1))),128))])):F("",!0),(z=t==null?void 0:t.weaknesses)!=null&&z.length?(n(),a("div",Z,[(n(!0),a(A,null,k(t.weaknesses.slice(0,2),b=>(n(),a("span",{key:b,class:"text-[10px] text-red-400/70 font-body block"},"- "+i(b),1))),128))])):F("",!0)],2)}),128))])]))),128))])):(n(),a("div",I," Select two reports to compare "))}},te={class:"flex items-center justify-between mb-6"},oe={key:0,class:"text-xs text-zinc-600 font-body text-center py-8"},ne={__name:"JudgeCompare",setup(r){const l=T(),v=M(),{showToast:x}=V(),y=w(!0),g=w(null),B=w(null);return R(async()=>{const p=l.query.a,c=l.query.b;if(!p||!c){x("Two report IDs required for comparison","error"),y.value=!1;return}try{const[f,m]=await Promise.all([v.loadReport(p),v.loadReport(c)]);g.value=f,B.value=m}catch{x("Failed to load reports","error")}finally{y.value=!1}}),(p,c)=>{const f=$("router-link");return n(),a("div",null,[o("div",te,[c[1]||(c[1]=o("div",null,[o("h2",{class:"font-display font-bold text-lg text-zinc-100 mb-1"},"Judge Compare"),o("p",{class:"text-sm text-zinc-600 font-body"},"Side-by-side comparison of two judge reports.")],-1)),D(f,{to:{name:"JudgeHistory"},class:"text-[10px] font-display tracking-wider uppercase px-3 py-1.5 rounded-sm",style:{border:"1px solid var(--border-subtle)",color:"var(--zinc-400)"}},{default:J(()=>[...c[0]||(c[0]=[L("Back to Reports",-1)])]),_:1})]),y.value?(n(),a("div",oe,"Loading reports...")):(n(),N(ee,{key:1,"report-a":g.value,"report-b":B.value},null,8,["report-a","report-b"]))])}}};export{ne as default};

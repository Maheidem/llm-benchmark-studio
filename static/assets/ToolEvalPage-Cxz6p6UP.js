import{b as o,c as s,d,y as n,t as p,f as i,l as S,F as C,B as m,r as $,o as F,x as j,i as h,s as B,q as N,a as M,e as H,L as I,n as L,M as z,J}from"./index-DdRTlIgb.js";import{u as w,a as A}from"./useSharedContext-Ck8vzsgc.js";const O={key:0,class:"te-context-bar",style:{position:"relative"}},R={key:0,class:"ctx-pill"},U={key:1,class:"ctx-pill"},V={__name:"ContextBar",emits:["toggleExperiment","newExperiment","showSystemPrompt"],setup(_){const{context:t}=w(),u=$(!1),y=m(()=>t.suiteId||t.selectedModels.length>0||t.experimentId),f=m(()=>{const r=t.systemPrompts;return r?typeof r=="string"?r.trim().length>0:typeof r=="object"?Object.values(r).some(e=>e&&e.trim()):!1:!1}),k=m(()=>{const r=t.systemPrompts;if(!r||typeof r!="object")return"System Prompt";let e=0;for(const[l,x]of Object.entries(r))x&&x.trim()&&l!=="_global"&&e++;return e>0?`System Prompt (${e} model${e>1?"s":""})`:"System Prompt"}),T={param_tuner:"from Param Tuner",prompt_tuner:"from Prompt Tuner",judge:"from Judge"},b={param_tuner:{bg:"rgba(99,102,241,0.1)",border:"rgba(99,102,241,0.25)",text:"#818CF8"},prompt_tuner:{bg:"rgba(168,85,247,0.1)",border:"rgba(168,85,247,0.25)",text:"#A855F7"},judge:{bg:"rgba(245,158,11,0.1)",border:"rgba(245,158,11,0.25)",text:"#F59E0B"}},E=m(()=>T[t.lastUpdatedBy]||"from "+t.lastUpdatedBy),P=m(()=>{const r=b[t.lastUpdatedBy]||{bg:"rgba(255,255,255,0.04)",border:"rgba(255,255,255,0.08)",text:"#A1A1AA"};return{background:r.bg,borderColor:r.border,color:r.text}});return(r,e)=>(o(),s(C,null,[y.value&&!u.value?(o(),s("div",O,[e[5]||(e[5]=d("span",{class:"text-[10px] text-zinc-600 font-display tracking-wider uppercase"},"Context:",-1)),n(t).suiteId?(o(),s("span",R,p(n(t).suiteName||"Suite"),1)):i("",!0),n(t).selectedModels.length>0?(o(),s("span",U,p(n(t).selectedModels.length)+" model"+p(n(t).selectedModels.length>1?"s":""),1)):i("",!0),n(t).experimentId?(o(),s("span",{key:2,class:"ctx-pill active",style:{cursor:"pointer"},onClick:e[0]||(e[0]=l=>r.$emit("toggleExperiment"))},p(n(t).experimentName||"Experiment"),1)):i("",!0),n(t).suiteId&&!n(t).experimentId?(o(),s("button",{key:3,onClick:e[1]||(e[1]=l=>r.$emit("newExperiment")),class:"text-[10px] px-1.5 py-0.5 rounded-sm",style:{background:"rgba(191,255,0,0.08)",border:"1px solid rgba(191,255,0,0.2)",color:"var(--lime)",cursor:"pointer"},title:"New Experiment"},"+")):i("",!0),f.value?(o(),s("span",{key:4,class:"ctx-pill",style:{background:"rgba(168,85,247,0.1)","border-color":"rgba(168,85,247,0.25)",color:"#A855F7",cursor:"pointer"},onClick:e[2]||(e[2]=l=>r.$emit("showSystemPrompt"))},p(k.value),1)):i("",!0),n(t).lastUpdatedBy?(o(),s("span",{key:5,class:"ctx-pill",style:S(P.value)},p(E.value),5)):i("",!0),d("button",{onClick:e[3]||(e[3]=l=>u.value=!0),class:"ml-auto text-[10px] text-zinc-700 hover:text-zinc-500",style:{background:"none",border:"none",cursor:"pointer"}},"Hide")])):i("",!0),y.value&&u.value?(o(),s("button",{key:1,onClick:e[4]||(e[4]=l=>u.value=!1),class:"text-[10px] text-zinc-700 hover:text-zinc-500 px-4 py-1",style:{background:"none",border:"none",cursor:"pointer"}},"Show Context")):i("",!0)],64))}},q={class:"max-w-7xl mx-auto px-6 py-8"},D={class:"flex items-center overflow-x-auto",style:{"border-bottom":"1px solid var(--border-subtle, rgba(255,255,255,0.06))"}},G=["onClick"],K={class:"mt-6"},Y={__name:"ToolEvalPage",setup(_){const t=B(),u=N(),y=A(),{inputModal:f}=z(),{context:k,setExperiment:T}=w(),{showToast:b}=J();F(()=>{y.loadContext()});const E=[{key:"suites",label:"Suites",route:"ToolEvalSuites"},{key:"evaluate",label:"Evaluate",route:"ToolEvalEvaluate"},{key:"param-tuner",label:"Param Tuner",route:"ParamTunerConfig"},{key:"prompt-tuner",label:"Prompt Tuner",route:"PromptTunerConfig"},{key:"prompt-library",label:"Prompt Library",route:"PromptLibrary"},{key:"judge",label:"Judge",route:"JudgeHistory"},{key:"timeline",label:"Timeline",route:"Timeline"},{key:"history",label:"History",route:"ToolEvalHistory"}],P={ToolEvalSuites:"suites",ToolEvalEditor:"suites",ToolEvalEvaluate:"evaluate",ParamTunerConfig:"param-tuner",ParamTunerRun:"param-tuner",ParamTunerHistory:"param-tuner",PromptTunerConfig:"prompt-tuner",PromptTunerRun:"prompt-tuner",PromptTunerHistory:"prompt-tuner",PromptLibrary:"prompt-library",JudgeHistory:"judge",JudgeCompare:"judge",Timeline:"timeline",ToolEvalHistory:"history"},r=m(()=>P[t.name]||"suites");function e(a){u.push({name:a.route})}async function l(){await u.push({name:"ToolEvalEvaluate"}),await L(),setTimeout(()=>{const a=document.querySelector('[data-section="system-prompt"]');a&&a.scrollIntoView({behavior:"smooth",block:"start"})},100)}async function x(){const a=await f("New Experiment","Enter experiment name:");if(a)try{const c=await I("/api/experiments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,suite_id:k.suiteId||null})});if(!c.ok)throw new Error("Failed to create experiment");const g=await c.json();T(g.id,g.name||a),b("Experiment created","success")}catch(c){b(c.message||"Failed to create experiment","error")}}return(a,c)=>{const g=M("router-view");return o(),s("div",q,[d("div",D,[(o(),s(C,null,j(E,v=>d("button",{key:v.key,class:H(["te-subtab",{"te-subtab-active":r.value===v.key}]),onClick:Q=>e(v)},p(v.label),11,G)),64))]),h(V,{onShowSystemPrompt:l,onNewExperiment:x}),d("div",K,[h(g)])])}}};export{Y as default};

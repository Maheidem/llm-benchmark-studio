import{o as g,c as o,t as y,d as r,f as _,F as w,A as K,s as c,r as v,M as A,K as C,b as a,l as P,e as z}from"./index-BMBAIBBO.js";const S={key:0,class:"text-zinc-600 text-sm font-body"},T={key:1,class:"text-red-400 text-xs font-body"},F={key:2,class:"card rounded-md overflow-hidden"},N={class:"px-5 py-3 flex items-center justify-between",style:{"border-bottom":"1px solid var(--border-subtle)"}},I={class:"flex items-center gap-3"},E={class:"divide-y",style:{"border-color":"var(--border-subtle)"}},j={key:0,class:"px-5 py-3 text-zinc-700 text-xs font-body"},M={class:"flex items-center gap-3"},O={class:"text-xs font-body text-zinc-300"},L={class:"text-[10px] font-mono text-zinc-600"},R={key:0,class:"text-[9px] font-display tracking-wider uppercase px-1.5 py-0.5 rounded-sm",style:{background:"rgba(251,146,60,0.08)",color:"#FB923C",border:"1px solid rgba(251,146,60,0.2)"}},B={key:1,class:"text-[9px] font-display tracking-wider uppercase px-1.5 py-0.5 rounded-sm",style:{background:"rgba(191,255,0,0.08)",color:"var(--lime)",border:"1px solid rgba(191,255,0,0.2)"}},D={key:2,class:"text-[9px] font-display tracking-wider uppercase px-1.5 py-0.5 rounded-sm",style:{background:"rgba(56,189,248,0.08)",color:"#38BDF8",border:"1px solid rgba(56,189,248,0.2)"}},U={key:3,class:"text-[9px] font-display tracking-wider uppercase px-1.5 py-0.5 rounded-sm",style:{background:"rgba(255,59,92,0.08)",color:"var(--coral)",border:"1px solid rgba(255,59,92,0.2)"}},Y={class:"flex gap-2"},J=["onClick"],V=["onClick"],H={__name:"ApiKeysPanel",setup($){const{showToast:n}=C(),{inputModal:x,multiFieldModal:k,confirm:m}=A(),p=v([]),u=v(!0),i=v("");async function d(){u.value=!0,i.value="";try{const t=await(await c("/api/keys")).json();p.value=t.keys||[]}catch{i.value="Failed to load API keys."}finally{u.value=!1}}async function b(s){const t=await x("Set API Key for "+s.display_name,"Paste your API key...",{type:"password"});if(t==null)return;const e=typeof t=="object"?t.value:t;if(e)try{await c("/api/keys",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider_key:s.provider_key,value:e})}),n("Key saved","success"),await d()}catch{n("Failed to save key","error")}}async function f(s){if(await m("Remove Key","Remove your personal key for <strong>"+s.display_name+"</strong>? You will fall back to the shared key (if one exists).",{danger:!0,confirmLabel:"Remove"}))try{await c("/api/keys",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider_key:s.provider_key})}),n("Key removed","success"),await d()}catch{n("Failed to remove key","error")}}async function h(){const s=await k("Add Custom API Key",[{key:"provider_key",label:"Provider Key",placeholder:"e.g. my_provider",type:"text"},{key:"key_name",label:"Key Name (optional)",placeholder:"e.g. My OpenAI Key",type:"text"},{key:"value",label:"API Key Value",placeholder:"sk-...",type:"password"}],{confirmLabel:"Save Key"});if(!s)return;const{provider_key:t,value:e}=s;if(!t||!e){n("Provider key and API key value are required","error");return}try{const l={provider_key:t.trim(),value:e};s.key_name&&s.key_name.trim()&&(l.key_name=s.key_name.trim()),await c("/api/keys",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),n("Custom key saved","success"),await d()}catch{n("Failed to save key","error")}}return g(d),(s,t)=>(a(),o("div",null,[u.value?(a(),o("div",S,"Loading API keys...")):i.value?(a(),o("div",T,y(i.value),1)):(a(),o("div",F,[r("div",N,[t[2]||(t[2]=r("span",{class:"section-label"},"My API Keys",-1)),r("div",I,[t[1]||(t[1]=r("span",{class:"text-[10px] text-zinc-600 font-body"},"Your keys are encrypted and only used for your benchmarks",-1)),r("button",{onClick:t[0]||(t[0]=e=>h()),class:"text-[10px] font-display tracking-wider uppercase px-2 py-0.5 rounded-sm transition-colors",style:{color:"var(--lime)",border:"1px solid rgba(191,255,0,0.2)"}},"+ Custom Key")])]),r("div",E,[p.value.length===0?(a(),o("div",j," No providers configured. ")):_("",!0),(a(!0),o(w,null,K(p.value,e=>(a(),o("div",{key:e.provider_key,class:"px-5 py-3 flex items-center justify-between group"},[r("div",M,[r("span",O,y(e.display_name),1),r("span",L,y(e.key_env_name||e.provider_key),1),e.standalone?(a(),o("span",R,"STANDALONE")):_("",!0),e.has_user_key?(a(),o("span",B,"YOUR KEY")):e.has_global_key?(a(),o("span",D,"SHARED")):(a(),o("span",U,"NOT SET"))]),r("div",Y,[r("button",{onClick:l=>b(e),class:z(["text-[10px] font-display tracking-wider uppercase px-2 py-0.5 rounded-sm transition-colors",e.has_user_key?"text-zinc-500 hover:text-zinc-300":"hover:text-zinc-200"]),style:P(e.has_user_key?"":"color:var(--lime);border:1px solid rgba(191,255,0,0.2)")},y(e.has_user_key?"Update":"Set Key"),15,J),e.has_user_key?(a(),o("button",{key:0,onClick:l=>f(e),class:"text-[10px] font-display tracking-wider uppercase text-zinc-600 hover:text-red-400 transition-colors"},"Remove",8,V)):_("",!0)])]))),128))])]))]))}};export{H as default};

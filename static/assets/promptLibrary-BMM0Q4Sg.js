import{S as m,r as u,L as s}from"./index-DdRTlIgb.js";const h=m("promptLibrary",()=>{const o=u([]),n=u(!1);async function p(){n.value=!0;try{const e=await s("/api/prompt-versions");if(!e.ok)throw new Error("Failed to load prompt versions");const t=await e.json();o.value=t.versions||[]}finally{n.value=!1}}async function c(e,t=null,a="manual",i=null){const r=await s("/api/prompt-versions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_text:e,label:t||null,source:a,parent_version_id:i||null})});if(!r.ok){const w=await r.json().catch(()=>({}));throw new Error(w.error||"Failed to save version")}const l=await r.json();return await p(),l}async function d(e,t){const a=await s(`/api/prompt-versions/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:t})});if(!a.ok)throw new Error("Failed to update version");const i=await a.json(),r=o.value.findIndex(l=>l.id===e);return r!==-1&&(o.value[r]={...o.value[r],label:t}),i}async function v(e){if(!(await s(`/api/prompt-versions/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete version");o.value=o.value.filter(a=>a.id!==e)}function f(){o.value=[],n.value=!1}return{versions:o,loading:n,loadVersions:p,saveVersion:c,updateVersion:d,deleteVersion:v,reset:f}});export{h as u};

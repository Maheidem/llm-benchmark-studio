import{o as r,c as s,a as d,q as n,t as m,d as i,g as S,F as w,y as p,r as $,i as F,p as j,l as C,I as N,m as B,J as I,b as H,K as M,n as z,L as J,G as A}from"./index-BxbfhC3f.js";import{u as P,a as L}from"./useSharedContext-DRtY8wlt.js";const O={key:0,class:"te-context-bar",style:{position:"relative"}},R={key:0,class:"ctx-pill"},U={key:1,class:"ctx-pill"},V={__name:"ContextBar",emits:["toggleExperiment","newExperiment","showSystemPrompt"],setup(_){const{context:t}=P(),u=$(!1),y=p(()=>t.suiteId||t.selectedModels.length>0||t.experimentId),f=p(()=>{const o=t.systemPrompts;return o?typeof o=="string"?o.trim().length>0:typeof o=="object"?Object.values(o).some(e=>e&&e.trim()):!1:!1}),k=p(()=>{const o=t.systemPrompts;if(!o||typeof o!="object")return"System Prompt";let e=0;for(const[l,x]of Object.entries(o))x&&x.trim()&&l!=="_global"&&e++;return e>0?`System Prompt (${e} model${e>1?"s":""})`:"System Prompt"}),T={param_tuner:"from Param Tuner",prompt_tuner:"from Prompt Tuner",judge:"from Judge"},b={param_tuner:{bg:"rgba(99,102,241,0.1)",border:"rgba(99,102,241,0.25)",text:"#818CF8"},prompt_tuner:{bg:"rgba(168,85,247,0.1)",border:"rgba(168,85,247,0.25)",text:"#A855F7"},judge:{bg:"rgba(245,158,11,0.1)",border:"rgba(245,158,11,0.25)",text:"#F59E0B"}},E=p(()=>T[t.lastUpdatedBy]||"from "+t.lastUpdatedBy),h=p(()=>{const o=b[t.lastUpdatedBy]||{bg:"rgba(255,255,255,0.04)",border:"rgba(255,255,255,0.08)",text:"#A1A1AA"};return{background:o.bg,borderColor:o.border,color:o.text}});return(o,e)=>(r(),s(w,null,[y.value&&!u.value?(r(),s("div",O,[e[5]||(e[5]=d("span",{class:"text-[10px] text-zinc-600 font-display tracking-wider uppercase"},"Context:",-1)),n(t).suiteId?(r(),s("span",R,m(n(t).suiteName||"Suite"),1)):i("",!0),n(t).selectedModels.length>0?(r(),s("span",U,m(n(t).selectedModels.length)+" model"+m(n(t).selectedModels.length>1?"s":""),1)):i("",!0),n(t).experimentId?(r(),s("span",{key:2,class:"ctx-pill active",style:{cursor:"pointer"},onClick:e[0]||(e[0]=l=>o.$emit("toggleExperiment"))},m(n(t).experimentName||"Experiment"),1)):i("",!0),n(t).suiteId&&!n(t).experimentId?(r(),s("button",{key:3,onClick:e[1]||(e[1]=l=>o.$emit("newExperiment")),class:"text-[10px] px-1.5 py-0.5 rounded-sm",style:{background:"rgba(191,255,0,0.08)",border:"1px solid rgba(191,255,0,0.2)",color:"var(--lime)",cursor:"pointer"},title:"New Experiment"},"+")):i("",!0),f.value?(r(),s("span",{key:4,class:"ctx-pill",style:{background:"rgba(168,85,247,0.1)","border-color":"rgba(168,85,247,0.25)",color:"#A855F7",cursor:"pointer"},onClick:e[2]||(e[2]=l=>o.$emit("showSystemPrompt"))},m(k.value),1)):i("",!0),n(t).lastUpdatedBy?(r(),s("span",{key:5,class:"ctx-pill",style:S(h.value)},m(E.value),5)):i("",!0),d("button",{onClick:e[3]||(e[3]=l=>u.value=!0),class:"ml-auto text-[10px] text-zinc-700 hover:text-zinc-500",style:{background:"none",border:"none",cursor:"pointer"}},"Hide")])):i("",!0),y.value&&u.value?(r(),s("button",{key:1,onClick:e[4]||(e[4]=l=>u.value=!1),class:"text-[10px] text-zinc-700 hover:text-zinc-500 px-4 py-1",style:{background:"none",border:"none",cursor:"pointer"}},"Show Context")):i("",!0)],64))}},q={class:"max-w-7xl mx-auto px-6 py-8"},D={class:"flex items-center overflow-x-auto",style:{"border-bottom":"1px solid var(--border-subtle, rgba(255,255,255,0.06))"}},G=["onClick"],K={class:"mt-6"},Y={__name:"ToolEvalPage",setup(_){const t=N(),u=B(),y=L(),{inputModal:f}=J(),{context:k,setExperiment:T}=P(),{showToast:b}=A();F(()=>{y.loadContext()});const E=[{key:"suites",label:"Suites",route:"ToolEvalSuites"},{key:"evaluate",label:"Evaluate",route:"ToolEvalEvaluate"},{key:"param-tuner",label:"Param Tuner",route:"ParamTunerConfig"},{key:"prompt-tuner",label:"Prompt Tuner",route:"PromptTunerConfig"},{key:"judge",label:"Judge",route:"JudgeHistory"},{key:"timeline",label:"Timeline",route:"Timeline"},{key:"history",label:"History",route:"ToolEvalHistory"}],h={ToolEvalSuites:"suites",ToolEvalEditor:"suites",ToolEvalEvaluate:"evaluate",ParamTunerConfig:"param-tuner",ParamTunerRun:"param-tuner",ParamTunerHistory:"param-tuner",PromptTunerConfig:"prompt-tuner",PromptTunerRun:"prompt-tuner",PromptTunerHistory:"prompt-tuner",JudgeHistory:"judge",JudgeCompare:"judge",Timeline:"timeline",ToolEvalHistory:"history"},o=p(()=>h[t.name]||"suites");function e(a){u.push({name:a.route})}async function l(){await u.push({name:"ToolEvalEvaluate"}),await z(),setTimeout(()=>{const a=document.querySelector('[data-section="system-prompt"]');a&&a.scrollIntoView({behavior:"smooth",block:"start"})},100)}async function x(){const a=await f("New Experiment","Enter experiment name:");if(a)try{const c=await M("/api/experiments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,suite_id:k.suiteId||null})});if(!c.ok)throw new Error("Failed to create experiment");const g=await c.json();T(g.id,g.name||a),b("Experiment created","success")}catch(c){b(c.message||"Failed to create experiment","error")}}return(a,c)=>{const g=I("router-view");return r(),s("div",q,[d("div",D,[(r(),s(w,null,j(E,v=>d("button",{key:v.key,class:H(["te-subtab",{"te-subtab-active":o.value===v.key}]),onClick:Q=>e(v)},m(v.label),11,G)),64))]),C(V,{onShowSystemPrompt:l,onNewExperiment:x}),d("div",K,[C(g)])])}}};export{Y as default};

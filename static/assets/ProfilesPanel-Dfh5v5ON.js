import{i as F,c as l,q as _,a as t,d as p,F as w,p as P,e as L,t as m,f as x,v as y,O as E,r as g,P as T,G as q,o as i,g as J,L as G}from"./index-BxbfhC3f.js";import{u as H}from"./profiles-BVcR1NyN.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={key:0,class:"text-zinc-600 text-sm font-body"},Q={key:1,class:"space-y-6"},R={class:"flex items-center justify-between"},W={key:0,class:"card rounded-md px-5 py-8 text-center text-zinc-600 text-xs font-body"},X={class:"px-5 py-3 flex items-center justify-between",style:{"border-bottom":"1px solid var(--border-subtle)"}},Y=["title"],Z=["onClick"],ee={class:"divide-y",style:{"border-color":"var(--border-subtle)"}},te={class:"flex-1 min-w-0"},se={class:"flex items-center gap-2 flex-wrap"},oe={class:"text-xs font-body text-zinc-200"},ne={key:0,class:"text-[9px] font-display tracking-wider uppercase px-1.5 py-0.5 rounded-sm",style:{background:"rgba(191,255,0,0.08)",color:"var(--lime)",border:"1px solid rgba(191,255,0,0.2)"}},re={key:0,class:"text-[10px] text-zinc-600 font-body mt-0.5 truncate"},ae={key:1,class:"text-[10px] font-mono text-zinc-700 mt-0.5 truncate"},le={class:"text-[9px] text-zinc-700 font-body mt-0.5"},ie={class:"flex items-center gap-2 shrink-0"},de=["onClick"],ce=["onClick"],ue=["onClick"],pe={class:"w-full max-w-lg rounded-md overflow-hidden",style:{background:"var(--surface)",border:"1px solid var(--border-subtle)"}},me={class:"px-5 py-4",style:{"border-bottom":"1px solid var(--border-subtle)"}},fe={class:"section-label"},xe={class:"px-5 py-4 space-y-4 max-h-[70vh] overflow-y-auto"},ye={key:0},be={class:"flex items-center justify-between mb-2"},ve={class:"space-y-2"},_e=["onUpdate:modelValue"],ge=["onUpdate:modelValue"],ke=["onClick"],he={key:0,class:"text-[10px] text-zinc-700 font-body"},we={class:"flex items-center gap-2"},Pe={class:"px-5 py-4 flex items-center justify-end gap-3",style:{"border-top":"1px solid var(--border-subtle)"}},ze=["disabled"],Ce={__name:"ProfilesPanel",setup(je){const d=H(),{showToast:c}=q(),{confirm:j}=G(),b=g(!1),u=g(null),v=g(!1),n=T({model_id:"",name:"",description:"",system_prompt:"",is_default:!1}),f=g([]);function k(s){if(!s)return{};if(typeof s=="object")return s;try{return JSON.parse(s)}catch{return{}}}function D(s){const e=k(s);return Object.entries(e).map(([o,a])=>`${o}=${a}`).join(", ")}function S(s){if(!s)return"";try{return new Date(s).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch{return s}}function N(s){const e={manual:"background:rgba(113,113,122,0.12);color:#71717A;border:1px solid rgba(113,113,122,0.2)",param_tuner:"background:rgba(56,189,248,0.08);color:#38BDF8;border:1px solid rgba(56,189,248,0.2)",prompt_tuner:"background:rgba(168,85,247,0.08);color:#A855F7;border:1px solid rgba(168,85,247,0.2)",import:"background:rgba(251,146,60,0.08);color:#FB923C;border:1px solid rgba(251,146,60,0.2)"};return e[s]||e.manual}function $(){f.value.push({key:"",value:""})}function V(s){f.value.splice(s,1)}function z(s=""){u.value=null,n.model_id=s,n.name="",n.description="",n.system_prompt="",n.is_default=!1,f.value=[],b.value=!0}function M(s){u.value=s,n.name=s.name,n.description=s.description||"",n.system_prompt=s.system_prompt||"",n.is_default=!!s.is_default;const e=k(s.params_json);f.value=Object.entries(e).map(([o,a])=>({key:o,value:String(a)})),b.value=!0}function h(){b.value=!1,u.value=null}function U(){const s={};for(const e of f.value){const o=e.key.trim();if(!o)continue;const a=e.value.trim();a==="true"?s[o]=!0:a==="false"?s[o]=!1:a!==""&&!isNaN(Number(a))?s[o]=Number(a):s[o]=a}return s}async function B(){if(!u.value&&!n.model_id.trim()){c("Model ID is required","error");return}if(!n.name.trim()){c("Name is required","error");return}v.value=!0;try{const s=U();u.value?(await d.updateProfile(u.value.id,{name:n.name.trim(),description:n.description.trim()||null,system_prompt:n.system_prompt.trim()||null,is_default:n.is_default,params_json:s}),c("Profile updated","success")):(await d.createProfile({model_id:n.model_id.trim(),name:n.name.trim(),description:n.description.trim()||"",system_prompt:n.system_prompt.trim()||null,is_default:n.is_default,params_json:s,origin_type:"manual"}),c("Profile created","success")),h(),await d.fetchProfiles()}catch(s){c(s.message,"error")}finally{v.value=!1}}async function O(s){try{await d.setDefault(s.id),c("Default updated","success")}catch(e){c(e.message,"error")}}async function A(s){if(await j("Delete Profile",`Delete profile <strong>${s.name}</strong>? This cannot be undone.`,{danger:!0,confirmLabel:"Delete"}))try{await d.deleteProfile(s.id),c("Profile deleted","success")}catch(o){c(o.message,"error")}}return F(()=>d.fetchProfiles()),(s,e)=>(i(),l("div",null,[_(d).loading&&_(d).profiles.length===0?(i(),l("div",K," Loading profiles... ")):(i(),l("div",Q,[t("div",R,[e[10]||(e[10]=t("p",{class:"text-[11px] text-zinc-600 font-body"}," Profiles store saved parameter sets and system prompts for a model. ",-1)),t("button",{onClick:e[0]||(e[0]=o=>z()),class:"text-[10px] font-display tracking-wider uppercase px-3 py-1.5 rounded-sm transition-colors",style:{color:"var(--lime)",border:"1px solid rgba(191,255,0,0.2)"}}," + New Profile ")]),Object.keys(_(d).profilesByModel).length===0?(i(),l("div",W," No profiles yet. Create one to save parameter sets and system prompts for a model. ")):p("",!0),(i(!0),l(w,null,P(_(d).profilesByModel,(o,a)=>(i(),l("div",{key:a,class:"card rounded-md overflow-hidden"},[t("div",X,[t("span",{class:"section-label truncate",title:a},m(a),9,Y),t("button",{onClick:r=>z(a),class:"text-[9px] font-display tracking-wider uppercase px-2 py-0.5 rounded-sm transition-colors text-zinc-500 hover:text-zinc-300",style:{border:"1px solid var(--border-subtle)"}},"+ Add",8,Z)]),t("div",ee,[(i(!0),l(w,null,P(o,r=>(i(),l("div",{key:r.id,class:"px-5 py-3 flex items-start justify-between gap-4 group"},[t("div",te,[t("div",se,[t("span",oe,m(r.name),1),r.is_default?(i(),l("span",ne,"DEFAULT")):p("",!0),t("span",{class:"text-[9px] font-display tracking-wider uppercase px-1.5 py-0.5 rounded-sm",style:J(N(r.origin_type))},m(r.origin_type),5)]),r.description?(i(),l("p",re,m(r.description),1)):p("",!0),r.params_json&&Object.keys(k(r.params_json)).length>0?(i(),l("p",ae,m(D(r.params_json)),1)):p("",!0),t("p",le,m(S(r.created_at)),1)]),t("div",ie,[r.is_default?p("",!0):(i(),l("button",{key:0,onClick:C=>O(r),class:"text-[10px] font-display tracking-wider uppercase text-zinc-600 hover:text-zinc-300 transition-colors"},"Set Default",8,de)),t("button",{onClick:C=>M(r),class:"text-[10px] font-display tracking-wider uppercase text-zinc-500 hover:text-zinc-200 transition-colors"},"Edit",8,ce),t("button",{onClick:C=>A(r),class:"text-[10px] font-display tracking-wider uppercase text-zinc-600 hover:text-red-400 transition-colors"},"Delete",8,ue)])]))),128))])]))),128))])),b.value?(i(),l("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0,0,0,0.6)"},onClick:e[9]||(e[9]=L(o=>h(),["self"]))},[t("div",pe,[t("div",me,[t("span",fe,m(u.value?"Edit Profile":"New Profile"),1)]),t("div",xe,[u.value?p("",!0):(i(),l("div",ye,[e[11]||(e[11]=t("label",{class:"field-label"},"Model ID *",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.model_id=o),type:"text",placeholder:"e.g. openai/gpt-4o",class:"settings-input"},null,512),[[y,n.model_id]])])),t("div",null,[e[12]||(e[12]=t("label",{class:"field-label"},"Name *",-1)),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.name=o),type:"text",placeholder:"e.g. High Accuracy",class:"settings-input"},null,512),[[y,n.name]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"field-label"},"Description",-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.description=o),type:"text",placeholder:"Optional description",class:"settings-input"},null,512),[[y,n.description]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"field-label"},"System Prompt",-1)),x(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>n.system_prompt=o),rows:"3",placeholder:"Optional system prompt override",class:"w-full px-3 py-2 rounded-sm text-xs font-mono text-zinc-200",style:{background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-subtle)",outline:"none",resize:"vertical"}},null,512),[[y,n.system_prompt]])]),t("div",null,[t("div",be,[e[15]||(e[15]=t("label",{class:"field-label"},"Parameters",-1)),t("button",{onClick:e[5]||(e[5]=o=>$()),class:"text-[9px] font-display tracking-wider uppercase text-zinc-500 hover:text-zinc-300 transition-colors"},"+ Add")]),t("div",ve,[(i(!0),l(w,null,P(f.value,(o,a)=>(i(),l("div",{key:a,class:"flex gap-2 items-center"},[x(t("input",{"onUpdate:modelValue":r=>o.key=r,type:"text",placeholder:"key",class:"settings-input flex-1"},null,8,_e),[[y,o.key]]),x(t("input",{"onUpdate:modelValue":r=>o.value=r,type:"text",placeholder:"value",class:"settings-input flex-1"},null,8,ge),[[y,o.value]]),t("button",{onClick:r=>V(a),class:"text-[10px] text-zinc-600 hover:text-red-400 transition-colors shrink-0"},"x",8,ke)]))),128)),f.value.length===0?(i(),l("p",he,' No parameters. Click "+ Add" to add key-value pairs. ')):p("",!0)])]),t("div",we,[x(t("input",{id:"is-default","onUpdate:modelValue":e[6]||(e[6]=o=>n.is_default=o),type:"checkbox",class:"accent-lime-400"},null,512),[[E,n.is_default]]),e[16]||(e[16]=t("label",{for:"is-default",class:"text-xs font-body text-zinc-400 cursor-pointer"}," Set as default for this model ",-1))])]),t("div",Pe,[t("button",{onClick:e[7]||(e[7]=o=>h()),class:"text-[10px] font-display tracking-wider uppercase text-zinc-500 hover:text-zinc-300 px-3 py-1.5 transition-colors"},"Cancel"),t("button",{onClick:e[8]||(e[8]=o=>B()),disabled:v.value,class:"text-[10px] font-display tracking-wider uppercase px-3 py-1.5 rounded-sm transition-colors disabled:opacity-50",style:{color:"var(--lime)",border:"1px solid rgba(191,255,0,0.2)"}},m(v.value?"Saving...":"Save"),9,ze)])])])):p("",!0)]))}},$e=I(Ce,[["__scopeId","data-v-1e1d59d7"]]);export{$e as default};

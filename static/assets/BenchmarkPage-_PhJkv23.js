import{u as rt}from"./config-bEE9BPiW.js";import{u as j}from"./benchmark-JijKwirB.js";import{b as l,c as i,d as t,h as Q,v as lt,F as S,A as N,l as w,x as u,D as z,t as d,g as it,e as D,E as q,f as T,r as K,B as h,k as M,G as at,T as dt,i as F,z as ct,y as W,H as Z,o as ut,I as pt,J as mt,K as xt,L as vt}from"./index-BMBAIBBO.js";import{C as I,a as X,L as U,B as Y,b as tt,P as V,p as H,c as G,i as et,d as st,e as ot,S as ft}from"./index-C9ZVOmvI.js";import"./useActiveSession-DdoXJmDo.js";import"./useDirectBenchmark-BrT_hj1h.js";const gt={class:"flex items-center gap-4 mb-4"},bt={class:"flex-1 relative"},yt={class:"flex flex-col gap-2"},_t=["onClick"],kt={class:"provider-group-count"},ht={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 pl-3"},$t=["onClick"],Ct={class:"flex-1 min-w-0"},Tt={class:"flex items-center gap-2"},St={class:"text-[13px] font-medium text-zinc-200 truncate font-body"},Bt={key:0,class:"text-[9px] font-mono px-1.5 py-0.5 rounded-sm",style:{background:"rgba(255,255,255,0.04)",color:"#85858F"}},wt={key:0,class:"text-center py-8 text-zinc-600 text-sm"},Ft={__name:"ModelGrid",props:{providers:{type:Array,required:!0},selectedModels:{type:Set,required:!0}},emits:["toggle","selectAll","selectNone","toggleProvider"],setup(v){const s=v,o=K(""),_=h(()=>{const a=o.value.toLowerCase().trim();return s.providers.map(c=>{const f=c.models.map(y=>({...y,compoundKey:(c.provider_key||c.name)+"::"+y.model_id})),p=a?f.filter(y=>y.display_name.toLowerCase().includes(a)||y.model_id.toLowerCase().includes(a)||c.name.toLowerCase().includes(a)):f;return{name:c.name,provider_key:c.provider_key,models:p}}).filter(c=>c.models.length>0)});function b(a){return s.selectedModels.has(a)}return(a,c)=>(l(),i("div",null,[t("div",gt,[t("div",bt,[Q(t("input",{"onUpdate:modelValue":c[0]||(c[0]=f=>o.value=f),type:"text",placeholder:"Search models...",class:"w-full px-3 py-2 text-sm rounded-sm prompt-input"},null,512),[[lt,o.value]])]),t("button",{class:"text-[11px] font-display tracking-wider uppercase px-3 py-1.5 rounded-sm transition-colors",style:{color:"var(--lime)",background:"var(--lime-dim)",border:"1px solid rgba(191,255,0,0.3)"},onClick:c[1]||(c[1]=f=>a.$emit("selectAll"))}," Select All "),t("button",{class:"text-[11px] font-display tracking-wider uppercase text-zinc-500 px-3 py-1.5 rounded-sm transition-colors hover:text-zinc-300",style:{background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-subtle)"},onClick:c[2]||(c[2]=f=>a.$emit("selectNone"))}," Select None ")]),t("div",yt,[(l(!0),i(S,null,N(_.value,f=>(l(),i("div",{key:f.name,class:"provider-group",style:w({borderColor:u(z)(f.name).border})},[t("div",{class:"provider-group-header",onClick:p=>a.$emit("toggleProvider",f.name)},[t("div",{class:"provider-group-dot",style:w({background:u(z)(f.name).text})},null,4),t("span",{class:"provider-group-label",style:w({color:u(z)(f.name).text})},d(f.name),5),t("span",kt,d(f.models.length)+" model"+d(f.models.length>1?"s":""),1)],8,_t),t("div",ht,[(l(!0),i(S,null,N(f.models,p=>(l(),i("div",{key:p.compoundKey,class:D(["model-card rounded-sm px-4 py-3 flex items-center gap-3",{selected:b(p.compoundKey)}]),onClick:it(y=>a.$emit("toggle",p.compoundKey),["stop"])},[c[3]||(c[3]=t("div",{class:"check-dot flex-shrink-0"},null,-1)),t("div",Ct,[t("div",Tt,[t("div",St,d(p.display_name),1),p.context_window?(l(),i("span",Bt,d(u(q)(p.context_window)),1)):T("",!0)])])],10,$t))),128))])],4))),128))]),_.value.length===0?(l(),i("div",wt," No models match your search. ")):T("",!0)]))}},zt=["disabled"],At={__name:"RunButton",props:{label:{type:String,default:"RUN BENCHMARK"},disabled:Boolean,running:Boolean},emits:["click"],setup(v){return(s,o)=>(l(),i("button",{class:"run-btn px-6 py-3 rounded flex items-center gap-2 text-sm",disabled:v.disabled,onClick:o[0]||(o[0]=_=>s.$emit("click"))},[v.running?(l(),i(S,{key:0},[o[1]||(o[1]=t("svg",{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)),o[2]||(o[2]=M(" RUNNING... ",-1))],64)):(l(),i(S,{key:1},[o[3]||(o[3]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),at(s.$slots,"default",{},()=>[M(d(v.label),1)])],64))],8,zt))}},Mt={class:"flex flex-wrap gap-2"},Rt=["onClick"],Et={key:0,class:"mt-2"},Ot={__name:"TierChips",props:{selectedTiers:{type:Set,required:!0},tierOptions:{type:Array,default:()=>dt}},emits:["toggle"],setup(v){const s=v;function o(b){return s.selectedTiers.has(b)}const _=h(()=>s.selectedTiers.size>1||s.selectedTiers.size===1&&!s.selectedTiers.has(0));return(b,a)=>(l(),i(S,null,[t("div",Mt,[(l(!0),i(S,null,N(v.tierOptions,c=>(l(),i("button",{key:c.value,class:D(["text-[11px] font-mono px-3 py-1.5 rounded-sm transition-all",o(c.value)?"":"text-zinc-600 hover:text-zinc-400"]),style:w(o(c.value)?"background:var(--lime-dim);color:var(--lime);border:1px solid rgba(191,255,0,0.3)":"background:rgba(255,255,255,0.02);border:1px solid var(--border-subtle)"),onClick:f=>b.$emit("toggle",c.value)},d(c.label),15,Rt))),128))]),_.value?(l(),i("div",Et,[...a[0]||(a[0]=[t("span",{class:"text-[10px] font-mono px-2 py-0.5 rounded-sm",style:{background:"rgba(56,189,248,0.1)",color:"#38BDF8",border:"1px solid rgba(56,189,248,0.3)"}}," STRESS TEST MODE ",-1)])])):T("",!0)],64))}},Nt={class:"card rounded-lg p-5 flex flex-col gap-5"},Pt={class:"flex items-center justify-between mb-2"},Lt={class:"text-xs font-mono text-zinc-400"},It=["value"],Dt={class:"flex items-center justify-between mb-2"},Kt={class:"text-xs font-mono text-zinc-400"},jt=["value"],qt=["value"],Wt={class:"flex items-center justify-between mb-2"},Ut={class:"text-xs font-mono text-zinc-400"},Vt=["value"],Ht={class:"flex items-center justify-between mb-2"},Gt=["value"],Jt=["value"],Qt={__name:"BenchmarkConfig",setup(v){const s=j(),o=K("");function _(){o.value&&s.applyPromptTemplate(o.value)}return(b,a)=>(l(),i("div",Nt,[a[13]||(a[13]=t("div",{class:"section-label mb-1"},"Configuration",-1)),t("div",null,[t("div",Pt,[a[6]||(a[6]=t("label",{class:"text-xs text-zinc-500 font-body"},"Max Tokens",-1)),t("span",Lt,d(u(s).maxTokens),1)]),t("input",{type:"range",value:u(s).maxTokens,min:"64",max:"4096",step:"64",class:"w-full",onInput:a[0]||(a[0]=c=>u(s).maxTokens=parseInt(c.target.value))},null,40,It)]),t("div",null,[t("div",Dt,[a[7]||(a[7]=t("label",{class:"text-xs text-zinc-500 font-body"},"Temperature",-1)),t("span",Kt,d(u(s).temperature.toFixed(1)),1)]),t("input",{type:"range",value:u(s).temperature,min:"0",max:"2",step:"0.1",class:"w-full",onInput:a[1]||(a[1]=c=>u(s).temperature=parseFloat(c.target.value))},null,40,jt)]),t("div",null,[a[8]||(a[8]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-xs text-zinc-500 font-body"},"Runs per model")],-1)),t("input",{type:"number",value:u(s).runs,min:"1",max:"10",class:"w-20 px-3 py-1.5 text-sm font-mono rounded-sm prompt-input",onInput:a[2]||(a[2]=c=>u(s).runs=Math.max(1,Math.min(10,parseInt(c.target.value)||1)))},null,40,qt)]),t("div",null,[t("div",Wt,[a[9]||(a[9]=t("label",{class:"text-xs text-zinc-500 font-body"},"Timeout (seconds)",-1)),t("span",Ut,d(u(s).timeout)+"s",1)]),t("input",{type:"range",value:u(s).timeout,min:"30",max:"600",step:"30",class:"w-full",onInput:a[3]||(a[3]=c=>u(s).timeout=parseInt(c.target.value))},null,40,Vt)]),t("div",null,[a[10]||(a[10]=t("label",{class:"text-xs text-zinc-500 font-body block mb-2"},"Context Tiers",-1)),F(Ot,{"selected-tiers":u(s).contextTiers,onToggle:u(s).toggleTier},null,8,["selected-tiers","onToggle"])]),t("div",null,[t("div",Ht,[a[12]||(a[12]=t("label",{class:"text-xs text-zinc-500 font-body"},"Prompt",-1)),Q(t("select",{"onUpdate:modelValue":a[4]||(a[4]=c=>o.value=c),onChange:_,class:"text-xs font-mono px-3 py-1.5 rounded-sm cursor-pointer",style:{background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-subtle)",color:"#A1A1AA",outline:"none","max-width":"220px"}},[a[11]||(a[11]=t("option",{value:""},"Custom",-1)),(l(!0),i(S,null,N(u(s).promptTemplates,c=>(l(),i("option",{key:c.key,value:c.key},d(c.label),9,Gt))),128))],544),[[ct,o.value]])]),t("textarea",{value:u(s).prompt,rows:"3",class:"w-full px-3 py-2 rounded-sm prompt-input text-sm",placeholder:"Enter prompt for benchmark...",onInput:a[5]||(a[5]=c=>u(s).prompt=c.target.value)},null,40,Jt)])]))}},Zt={class:"progress-track rounded-full overflow-hidden"},Xt={key:0,class:"text-[10px] font-mono text-zinc-500 mt-1 text-right"},Yt={__name:"ProgressBar",props:{percent:{type:Number,default:0},eta:{type:String,default:""}},setup(v){return(s,o)=>(l(),i("div",null,[t("div",Zt,[t("div",{class:"progress-fill",style:w({width:v.percent+"%"})},null,4)]),v.eta?(l(),i("div",Xt,d(v.eta),1)):T("",!0)]))}},te={class:"flex flex-col gap-3"},ee=["title"],se={class:"ppr-mid"},oe={class:"ppr-status"},ne={class:"ppr-track"},re={class:"ppr-count"},le={key:0,class:"mt-3 p-3 rounded-sm flex flex-col gap-1.5",style:{background:"rgba(255,59,92,0.06)",border:"1px solid rgba(255,59,92,0.2)"}},ie={__name:"ProviderProgress",props:{providerProgress:{type:Object,required:!0}},setup(v){const s=v;function o(p){return p.completedSteps>=p.totalSteps}function _(p){return p.errors.length>0}function b(p){return p.totalSteps>0?p.completedSteps/p.totalSteps*100:0}function a(p,y){return _(p)?"#FBBF24":o(p)?"#4ADE80":z(y).bar}function c(p){if(!p.currentContextTokens||p.currentContextTokens===0)return"";const y=p.currentContextTokens;return y>=1e3?` @ ${y/1e3}K ctx`:` @ ${y} ctx`}const f=h(()=>{const p=[];for(const[y,r]of Object.entries(s.providerProgress))for(const e of r.errors)p.push({provider:y,...e});return p});return(p,y)=>(l(),i("div",te,[(l(!0),i(S,null,N(v.providerProgress,(r,e)=>(l(),i("div",{key:e,class:"provider-progress-row"},[t("div",{class:"ppr-name",style:w({color:u(z)(e).text}),title:e},d(e),13,ee),t("div",se,[t("div",oe,[o(r)&&!_(r)?(l(),i(S,{key:0},[y[0]||(y[0]=t("span",{style:{color:"#4ADE80"}},"✓",-1)),y[1]||(y[1]=M(" Complete ",-1))],64)):o(r)&&_(r)?(l(),i(S,{key:1},[y[2]||(y[2]=t("span",{style:{color:"#FBBF24"}},"⚠",-1)),y[3]||(y[3]=M(" Done with errors ",-1))],64)):r.status==="running"&&r.currentModel?(l(),i(S,{key:2},[M(d(r.currentModel)+d(c(r))+" (run "+d(r.currentRun)+"/"+d(r.totalRuns)+") ",1)],64)):(l(),i(S,{key:3},[M(" Waiting... ")],64))]),t("div",ne,[t("div",{class:D(["ppr-fill",o(r)?"done":""]),style:w({width:b(r)+"%",backgroundColor:a(r,e),boxShadow:o(r)?"none":"0 0 8px "+u(z)(e).bar+"44"})},null,6)])]),t("div",re,d(r.completedSteps)+"/"+d(r.totalSteps),1)]))),128)),f.value.length>0?(l(),i("div",le,[y[4]||(y[4]=t("div",{class:"text-[11px] font-display tracking-wider uppercase",style:{color:"#FB7185","margin-bottom":"2px"}}," Errors ",-1)),(l(!0),i(S,null,N(f.value,(r,e)=>(l(),i("div",{key:e,class:"text-[11px] font-body",style:{color:"#FB7185"}},d(r.provider)+" / "+d(r.model)+": "+d(r.message),1))),128))])):T("",!0)]))}},ae={class:"card rounded-lg p-5"},de={class:"flex items-center justify-between mb-4"},ce={class:"flex items-center gap-3"},ue={class:"text-sm text-zinc-300 font-body"},pe={class:"text-xs font-mono text-zinc-500"},me={key:0,class:"ml-2 text-zinc-600"},xe={class:"mt-5"},ve={key:0,class:"mt-4"},fe={class:"mt-4 flex justify-end"},ge={__name:"BenchmarkProgress",setup(v){const s=j(),o=h(()=>{const{completed:_,total:b}=s.overallProgress;return b>0?_/b*100:0});return(_,b)=>(l(),i("div",ae,[t("div",de,[t("div",ce,[b[1]||(b[1]=t("div",{class:"pulse-dot"},null,-1)),t("span",ue,d(u(s).overallLabel||"Running..."),1)]),t("span",pe,[M(d(u(s).overallProgress.completed)+"/"+d(u(s).overallProgress.total)+" ",1),u(s).eta?(l(),i("span",me,d(u(s).eta),1)):T("",!0)])]),F(Yt,{percent:o.value,eta:u(s).eta},null,8,["percent","eta"]),t("div",xe,[F(ie,{"provider-progress":u(s).providerProgress},null,8,["provider-progress"])]),u(s).skippedModels.length>0?(l(),i("div",ve,[(l(!0),i(S,null,N(u(s).skippedModels,(a,c)=>(l(),i("div",{key:c,class:"skipped-line"}," ⏭ "+d(a.model)+": skipped ("+d(a.reason)+") ",1))),128))])):T("",!0),t("div",fe,[t("button",{class:"text-xs font-display tracking-wider uppercase px-4 py-2 rounded-sm transition-colors",style:{color:"var(--coral)",background:"rgba(255,59,92,0.08)",border:"1px solid rgba(255,59,92,0.2)"},onClick:b[0]||(b[0]=a=>u(s).cancelBenchmark())}," Cancel ")])]))}};function J(){return I.defaults.color="#8B8B95",I.defaults.borderColor="#1f1f23",I.defaults.font.family="'Outfit', sans-serif",{gridColor:"rgba(255,255,255,0.03)",tooltipStyle:{backgroundColor:"#1c1c20",borderColor:"#27272A",borderWidth:1,titleFont:{family:"'Outfit'",weight:"500",size:13},bodyFont:{family:"'Space Mono'",size:12},titleColor:"#E4E4E7",bodyColor:"#A1A1AA",padding:12,cornerRadius:2},axisLabelFont:{family:"'Chakra Petch'",size:10,weight:"600"},tickFont:{family:"'Space Mono'",size:11}}}const be={class:"card p-4 rounded-lg"},ye={class:"section-label mb-3"},_e={__name:"ThroughputChart",props:{results:{type:Array,required:!0},isStressMode:{type:Boolean,default:!1}},setup(v){I.register(X,U,Y,tt,V,H,G,et);const s=v,{gridColor:o,tooltipStyle:_,axisLabelFont:b,tickFont:a}=J(),c=h(()=>s.isStressMode?st:ot),f=h(()=>s.isStressMode?320:Math.max(200,s.results.length*36)),p=h(()=>{const r=s.results;if(!s.isStressMode)return{labels:r.map(x=>x.model),datasets:[{label:"Tokens/sec",data:r.map(x=>x.tokens_per_second),backgroundColor:r.map(x=>z(x.provider).bar+"CC"),borderColor:r.map(x=>z(x.provider).bar),borderWidth:0,borderRadius:2,barPercentage:.55}]};const e=[...new Set(r.map(x=>x.context_tokens))].sort((x,k)=>x-k),n=[...new Set(r.map(x=>`${x.model_id}::${x.provider}`))],C=e.map(x=>x===0?"0":x>=1e3?x/1e3+"K":String(x)),B=n.map(x=>{var O,L;const k=r.filter(A=>`${A.model_id}::${A.provider}`===x),E=((O=k[0])==null?void 0:O.model)||x,g=((L=k[0])==null?void 0:L.provider)||"",m=z(g),P=e.map(A=>{const R=k.find($=>$.context_tokens===A);return R&&R.success?R.tokens_per_second:null});return{label:E,data:P,borderColor:m.bar,backgroundColor:m.bar+"33",borderWidth:2,pointRadius:4,pointBackgroundColor:m.bar,pointBorderColor:"#09090B",pointBorderWidth:2,tension:.3,spanGaps:!1}});return{labels:C,datasets:B}}),y=h(()=>{const r={responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeOutQuart"}};return s.isStressMode?{...r,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{color:"#A1A1AA",font:{family:"'Outfit'",size:11},boxWidth:12,boxHeight:2,padding:16}},tooltip:{..._,callbacks:{title:e=>`Context: ${e[0].label} tokens`,label:e=>e.parsed.y!==null?` ${e.dataset.label}: ${e.parsed.y.toFixed(1)} tok/s`:` ${e.dataset.label}: N/A`}}},scales:{x:{grid:{color:o,drawBorder:!1},ticks:{color:"#8B8B95",font:a},title:{display:!0,text:"CONTEXT SIZE (TOKENS)",color:"#63636B",font:b,padding:{top:12}}},y:{grid:{color:o,drawBorder:!1},ticks:{color:"#8B8B95",font:a},title:{display:!0,text:"TOKENS / SECOND",color:"#63636B",font:b,padding:{right:12}}}}}:{...r,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{..._,callbacks:{label:e=>` ${e.parsed.x.toFixed(1)} tok/s`,afterLabel:e=>{const n=s.results[e.dataIndex];return n?` TTFT: ${n.ttft_ms.toFixed(0)}ms  |  Tokens: ${n.output_tokens.toFixed(0)}`:""}}}},scales:{x:{grid:{color:o,drawBorder:!1},ticks:{color:"#8B8B95",font:a},title:{display:!0,text:"TOKENS / SECOND",color:"#63636B",font:b,padding:{top:12}}},y:{grid:{display:!1,drawBorder:!1},ticks:{color:"#A1A1AA",font:{family:"'Outfit'",size:12,weight:"500"}}}}}});return(r,e)=>(l(),i("div",be,[t("div",ye,d(v.isStressMode?"Throughput vs Context Size":"Throughput (Tokens/sec)"),1),t("div",{style:w({height:f.value+"px"})},[(l(),W(Z(c.value),{data:p.value,options:y.value},null,8,["data","options"]))],4)]))}},ke={class:"card p-4 rounded-lg"},he={class:"section-label mb-3"},$e={__name:"TTFTChart",props:{results:{type:Array,required:!0},isStressMode:{type:Boolean,default:!1}},setup(v){I.register(X,U,Y,tt,V,H,G,et);const s=v,{gridColor:o,tooltipStyle:_,axisLabelFont:b,tickFont:a}=J(),c=h(()=>s.isStressMode?st:ot),f=h(()=>{if(s.isStressMode)return 320;const r=s.results.filter(e=>e.success);return Math.max(200,r.length*36)}),p=h(()=>{const r=s.results;if(!s.isStressMode){const x=[...r].filter(k=>k.success).sort((k,E)=>k.ttft_ms-E.ttft_ms);return{labels:x.map(k=>k.model),datasets:[{label:"TTFT (ms)",data:x.map(k=>k.ttft_ms),backgroundColor:x.map(k=>z(k.provider).bar+"CC"),borderWidth:0,borderRadius:2,barPercentage:.55}]}}const e=[...new Set(r.map(x=>x.context_tokens))].sort((x,k)=>x-k),n=[...new Set(r.map(x=>`${x.model_id}::${x.provider}`))],C=e.map(x=>x===0?"0":x>=1e3?x/1e3+"K":String(x)),B=n.map(x=>{var O,L;const k=r.filter(A=>`${A.model_id}::${A.provider}`===x),E=((O=k[0])==null?void 0:O.model)||x,g=((L=k[0])==null?void 0:L.provider)||"",m=z(g),P=e.map(A=>{const R=k.find($=>$.context_tokens===A);return R&&R.success?R.ttft_ms:null});return{label:E,data:P,borderColor:m.bar,backgroundColor:m.bar+"33",borderWidth:2,pointRadius:4,pointBackgroundColor:m.bar,pointBorderColor:"#09090B",pointBorderWidth:2,tension:.3,spanGaps:!1}});return{labels:C,datasets:B}}),y=h(()=>{const r={responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeOutQuart"}};return s.isStressMode?{...r,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{color:"#A1A1AA",font:{family:"'Outfit'",size:11},boxWidth:12,boxHeight:2,padding:16}},tooltip:{..._,callbacks:{title:e=>`Context: ${e[0].label} tokens`,label:e=>e.parsed.y!==null?` ${e.dataset.label}: ${e.parsed.y.toFixed(0)}ms`:` ${e.dataset.label}: N/A`}}},scales:{x:{grid:{color:o,drawBorder:!1},ticks:{color:"#8B8B95",font:a},title:{display:!0,text:"CONTEXT SIZE (TOKENS)",color:"#63636B",font:b,padding:{top:12}}},y:{grid:{color:o,drawBorder:!1},ticks:{color:"#8B8B95",font:a},title:{display:!0,text:"TIME TO FIRST TOKEN (MS)",color:"#63636B",font:b,padding:{right:12}}}}}:{...r,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{..._,callbacks:{label:e=>` ${e.parsed.x.toFixed(0)} ms`}}},scales:{x:{grid:{color:o,drawBorder:!1},ticks:{color:"#8B8B95",font:a},title:{display:!0,text:"TIME TO FIRST TOKEN (MS)",color:"#63636B",font:b,padding:{top:12}}},y:{grid:{display:!1,drawBorder:!1},ticks:{color:"#A1A1AA",font:{family:"'Outfit'",size:12,weight:"500"}}}}}});return(r,e)=>(l(),i("div",ke,[t("div",he,d(v.isStressMode?"Latency (TTFT) vs Context Size":"Time to First Token (TTFT)"),1),t("div",{style:w({height:f.value+"px"})},[(l(),W(Z(c.value),{data:p.value,options:y.value},null,8,["data","options"]))],4)]))}},Ce={key:0,class:"card p-4 rounded-lg"},Te={style:{height:"320px"}},Se={__name:"ScatterChart",props:{results:{type:Array,required:!0}},setup(v){I.register(U,V,H,G);const s=v,{gridColor:o,tooltipStyle:_,axisLabelFont:b,tickFont:a}=J(),c=h(()=>s.results.filter(r=>r.success)),f=h(()=>c.value.length>=2),p=h(()=>{const r=c.value;if(r.length<2)return{datasets:[]};const e=r.map(k=>k.output_tokens),n=Math.min(...e),C=Math.max(...e),B=k=>C===n?10:5+(k-n)/(C-n)*15;return{datasets:r.map(k=>{const E=z(k.provider);return{label:k.model,data:[{x:k.tokens_per_second,y:k.ttft_ms}],backgroundColor:E.bar,borderColor:E.bar,pointRadius:B(k.output_tokens),pointHoverRadius:B(k.output_tokens)+3}})}}),y=h(()=>({responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeOutQuart"},plugins:{legend:{display:!0,position:"top",labels:{color:"#A1A1AA",font:{family:"'Outfit'",size:11},boxWidth:8,boxHeight:8,padding:12,usePointStyle:!0}},tooltip:{..._,callbacks:{title:r=>r[0].dataset.label,label:r=>[` Tok/s: ${r.parsed.x.toFixed(1)}`,` TTFT: ${r.parsed.y.toFixed(0)}ms`]}}},scales:{x:{grid:{color:o,drawBorder:!1},ticks:{color:"#8B8B95",font:a},title:{display:!0,text:"TOKENS / SECOND",color:"#63636B",font:b,padding:{top:12}}},y:{grid:{color:o,drawBorder:!1},ticks:{color:"#8B8B95",font:a},title:{display:!0,text:"TTFT (MS)",color:"#63636B",font:b,padding:{right:12}}}}}));return(r,e)=>f.value?(l(),i("div",Ce,[e[0]||(e[0]=t("div",{class:"section-label mb-3"},"Speed vs Latency",-1)),t("div",Te,[F(u(ft),{data:p.value,options:y.value},null,8,["data","options"])])])):T("",!0)}},Be={__name:"ProviderBadge",props:{name:String,providerKey:String},setup(v){const s=v,o=h(()=>z(s.providerKey||s.name));return(_,b)=>(l(),i("span",{class:"badge",style:w({background:o.value.bg,border:"1px solid "+o.value.border,color:o.value.text})},d(v.name),5))}},we={class:"card rounded-lg overflow-hidden"},Fe={class:"overflow-x-auto"},ze={class:"w-full results-table"},Ae={class:"text-left",style:{"border-bottom":"1px solid var(--border-subtle)"}},Me={class:"px-5 py-3.5 text-center"},Re={key:1,class:"text-zinc-600"},Ee={class:"px-5 py-3.5"},Oe={class:"px-5 py-3.5 text-zinc-200 font-medium font-body text-[13px]"},Ne=["onClick"],Pe={key:0,class:"px-5 py-3.5 text-right font-mono text-sm text-zinc-500"},Le={key:1,class:"px-5 py-3.5 text-right font-mono text-sm text-zinc-600"},Ie={class:"px-5 py-3.5 text-right font-mono text-sm text-zinc-500"},De={class:"px-5 py-3.5 text-right font-mono text-sm text-zinc-500"},Ke={class:"px-5 py-3.5 text-right font-mono text-sm text-zinc-500"},je={class:"px-5 py-3.5 text-right font-mono text-sm text-zinc-500"},qe={class:"px-5 py-3.5 text-center"},We={key:0,class:"text-green-500 text-xs font-mono"},Ue={key:1,class:"text-amber-500 text-xs font-mono"},Ve=["title"],He={class:"px-5 py-3.5 text-right font-mono text-sm text-zinc-500"},Ge={__name:"ResultsTable",props:{results:{type:Array,required:!0},isStressMode:{type:Boolean,default:!1}},setup(v){const s=["P1","P2","P3"],o=v,_=K("tokens_per_second"),b=K(!1),a=h(()=>o.results.some(r=>r.runs>1)),c=h(()=>{if(_.value==="rank")return o.results;const r=_.value;return[...o.results].sort((e,n)=>{let C=e[r]??0,B=n[r]??0;return typeof C=="string"&&(C=C.toLowerCase()),typeof B=="string"&&(B=B.toLowerCase()),b.value?C>B?1:C<B?-1:0:C<B?1:C>B?-1:0})});function f(r){_.value===r?b.value=!b.value:(_.value=r,b.value=r==="ttft_ms"||r==="total_time_s"||r==="avg_cost")}function p(r){return q(r).replace(" ctx","")}function y(r){navigator.clipboard.writeText(r).catch(()=>{})}return(r,e)=>(l(),i("div",we,[t("div",Fe,[t("table",ze,[t("thead",null,[t("tr",Ae,[t("th",{class:"px-5 py-3 text-center section-label cursor-pointer",onClick:e[0]||(e[0]=n=>f("rank"))}," Rank "),t("th",{class:"px-5 py-3 section-label cursor-pointer",onClick:e[1]||(e[1]=n=>f("provider"))}," Provider "),t("th",{class:"px-5 py-3 section-label cursor-pointer",onClick:e[2]||(e[2]=n=>f("model"))}," Model "),v.isStressMode?(l(),i("th",{key:0,class:"px-5 py-3 text-right section-label cursor-pointer",onClick:e[3]||(e[3]=n=>f("context_tokens"))}," Context ")):T("",!0),t("th",{class:"px-5 py-3 text-right section-label cursor-pointer",onClick:e[4]||(e[4]=n=>f("tokens_per_second"))}," Tok/s "),a.value?(l(),i("th",{key:1,class:"px-5 py-3 text-right section-label cursor-pointer",onClick:e[5]||(e[5]=n=>f("std_dev_tps"))}," Std Dev ")):T("",!0),t("th",{class:"px-5 py-3 text-right section-label cursor-pointer",onClick:e[6]||(e[6]=n=>f("ttft_ms"))}," TTFT "),t("th",{class:"px-5 py-3 text-right section-label cursor-pointer",onClick:e[7]||(e[7]=n=>f("input_tokens_per_second"))}," Input Tok/s "),t("th",{class:"px-5 py-3 text-right section-label cursor-pointer",onClick:e[8]||(e[8]=n=>f("total_time_s"))}," Duration "),t("th",{class:"px-5 py-3 text-right section-label cursor-pointer",onClick:e[9]||(e[9]=n=>f("output_tokens"))}," Tokens "),e[11]||(e[11]=t("th",{class:"px-5 py-3 text-center section-label"},"Status",-1)),t("th",{class:"px-5 py-3 text-right section-label cursor-pointer",onClick:e[10]||(e[10]=n=>f("avg_cost"))}," Cost ")])]),t("tbody",null,[(l(!0),i(S,null,N(c.value,(n,C)=>(l(),i("tr",{key:n.model_id+"::"+n.provider+"::"+n.context_tokens,class:D(C===0&&n.success?"rank-1 fade-in":"fade-in")},[t("td",Me,[C<3&&n.success?(l(),i("span",{key:0,class:"font-display font-bold",style:w(C===0?"color:var(--lime)":"")},d(s[C]),5)):(l(),i("span",Re,d(C+1),1))]),t("td",Ee,[F(Be,{name:n.provider},null,8,["name"])]),t("td",Oe,[M(d(n.model)+" ",1),!n.success&&n.error?(l(),i("div",{key:0,class:"text-[11px] font-mono mt-0.5 cursor-pointer",style:{color:"#FB7185","word-break":"break-word","max-width":"320px"},title:"Click to copy",onClick:B=>y(n.error)},d(n.error),9,Ne)):T("",!0)]),v.isStressMode?(l(),i("td",Pe,d(n.context_tokens===0?"0":p(n.context_tokens)),1)):T("",!0),t("td",{class:D(["px-5 py-3.5 text-right font-mono text-sm",n.success&&C===0?"":"text-zinc-400"]),style:w(n.success&&C===0?"color:var(--lime)":"")},d(n.success?n.tokens_per_second.toFixed(1):"-"),7),a.value?(l(),i("td",Le,d(n.success&&n.std_dev_tps>0?"±"+n.std_dev_tps.toFixed(1):"-"),1)):T("",!0),t("td",Ie,d(n.success?n.ttft_ms.toFixed(0)+"ms":"-"),1),t("td",De,d(n.success&&n.input_tokens_per_second>0?Math.round(n.input_tokens_per_second).toLocaleString():"-"),1),t("td",Ke,d(n.success?n.total_time_s.toFixed(2)+"s":"-"),1),t("td",je,d(n.success?n.output_tokens.toFixed(0):"-"),1),t("td",qe,[n.failures===0?(l(),i("span",We,d(n.runs)+"/"+d(n.runs),1)):n.failures<n.runs?(l(),i("span",Ue,d(n.runs-n.failures)+"/"+d(n.runs),1)):(l(),i("span",{key:2,class:"text-red-400 text-xs font-mono",title:n.error}," FAIL ",8,Ve))]),t("td",He,d(n.success&&n.avg_cost>0?"$"+n.avg_cost.toFixed(4):"-"),1)],2))),128))])])])]))}},Je={class:"flex flex-col gap-6"},Qe={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Ze={class:"stat-card card-accent rounded-sm p-4"},Xe={class:"big-num text-2xl text-zinc-100"},Ye={class:"text-[11px] text-zinc-600 mt-1 font-body"},ts={class:"stat-card card rounded-sm p-4",style:{"border-left":"3px solid #38BDF8"}},es={class:"big-num text-2xl text-zinc-100"},ss={class:"text-[11px] text-zinc-600 mt-1 font-body"},os={class:"stat-card card rounded-sm p-4",style:{"border-left":"3px solid #8B8B95"}},ns={class:"big-num text-2xl text-zinc-100"},rs={class:"text-[11px] text-zinc-600 mt-1 font-body"},ls={class:"big-num text-2xl text-zinc-100"},is={class:"text-[11px] text-zinc-600 mt-1 font-body"},as={class:"stat-card card-accent rounded-sm p-4"},ds={class:"big-num text-2xl text-zinc-100"},cs={class:"text-[11px] text-zinc-600 mt-1 font-body"},us={key:1,class:"text-zinc-600 text-sm font-body"},ps={class:"stat-card card rounded-sm p-4",style:{"border-left":"3px solid #38BDF8"}},ms={class:"section-label mb-2"},xs={class:"big-num text-2xl text-zinc-100"},vs={class:"text-[11px] text-zinc-600 mt-1 font-body"},fs={key:1,class:"text-zinc-600 text-sm font-body"},gs={class:"stat-card card rounded-sm p-4",style:{"border-left":"3px solid #8B8B95"}},bs={class:"big-num text-2xl text-zinc-100"},ys={class:"text-[11px] text-zinc-600 mt-1 font-body"},_s={class:"text-[11px] text-zinc-600 mt-1 font-body"},ks={key:1,class:"error-banner",style:{"flex-direction":"column","align-items":"flex-start"}},hs={key:0,class:"w-full mt-2 pt-2",style:{"border-top":"1px solid rgba(255,59,92,0.2)"}},$s=["onClick"],Cs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ts={key:3,class:"flex justify-end"},Ss={__name:"BenchmarkResults",props:{results:{type:Array,required:!0},isStressMode:{type:Boolean,default:!1}},setup(v){const s=v,o=h(()=>s.results.length>0),_=h(()=>o.value&&s.results.every(g=>!g.success)),b=h(()=>s.results[0]||{}),a=h(()=>[...s.results].filter(g=>g.success).sort((g,m)=>g.ttft_ms-m.ttft_ms)[0]||{}),c=h(()=>s.results.length),f=h(()=>s.results.reduce((g,m)=>g+m.runs,0)),p=h(()=>s.results.reduce((g,m)=>g+m.failures,0)),y=h(()=>s.results.reduce((g,m)=>g+(m.total_cost||0),0)),r=h(()=>s.results.filter(g=>g.context_tokens===0&&g.success).sort((g,m)=>m.tokens_per_second-g.tokens_per_second)[0]),e=h(()=>Math.max(...s.results.map(g=>g.context_tokens))),n=h(()=>q(e.value).replace(" ctx","")),C=h(()=>s.results.filter(g=>g.context_tokens===e.value&&g.success).sort((g,m)=>m.tokens_per_second-g.tokens_per_second)[0]),B=h(()=>new Set(s.results.map(g=>g.context_tokens)).size),x=h(()=>s.results.filter(g=>!g.success&&g.error).map(g=>`${g.provider}/${g.model}: ${g.error}`));function k(g){navigator.clipboard.writeText(g).catch(()=>{})}function E(){const g=s.results;if(!g.length)return;const m=["Provider","Model","Tok/s","TTFT (ms)","Input Tok/s","Duration (s)","Output Tokens","Status","Avg Cost","Total Cost"],P=g.map($=>[$.provider,$.model,$.success?$.tokens_per_second.toFixed(2):"",$.success?$.ttft_ms.toFixed(0):"",$.success&&$.input_tokens_per_second>0?Math.round($.input_tokens_per_second):"",$.success?$.total_time_s.toFixed(3):"",$.success?$.output_tokens.toFixed(0):"",$.success?$.failures?"partial":"ok":"fail",$.success&&$.avg_cost>0?$.avg_cost.toFixed(6):"",$.success&&$.total_cost>0?$.total_cost.toFixed(6):""]),O=[m,...P].map($=>$.map(nt=>`"${String(nt).replace(/"/g,'""')}"`).join(",")).join(`
`),L=new Blob([O],{type:"text/csv"}),A=URL.createObjectURL(L),R=document.createElement("a");R.href=A,R.download="benchmark_results.csv",R.click(),URL.revokeObjectURL(A)}return(g,m)=>(l(),i("div",Je,[o.value?(l(),i("div",Qe,[v.isStressMode?(l(),i(S,{key:1},[t("div",as,[m[7]||(m[7]=t("div",{class:"section-label mb-2"},"Best @ 0K",-1)),r.value?(l(),i(S,{key:0},[t("div",ds,[M(d(r.value.tokens_per_second.toFixed(1))+" ",1),m[6]||(m[6]=t("span",{class:"text-xs font-normal",style:{color:"var(--lime)"}},"tok/s",-1))]),t("div",cs,d(r.value.model),1)],64)):(l(),i("div",us,"N/A"))]),t("div",ps,[t("div",ms,"Best @ "+d(n.value),1),C.value?(l(),i(S,{key:0},[t("div",xs,[M(d(C.value.tokens_per_second.toFixed(1))+" ",1),m[8]||(m[8]=t("span",{class:"text-xs font-normal",style:{color:"#38BDF8"}},"tok/s",-1))]),t("div",vs,d(C.value.model),1)],64)):(l(),i("div",fs,"N/A"))]),t("div",gs,[m[9]||(m[9]=t("div",{class:"section-label mb-2"},"Tiers Tested",-1)),t("div",bs,d(B.value),1),t("div",ys,d(f.value)+" total runs",1)]),t("div",{class:"stat-card card rounded-sm p-4",style:w("border-left: 3px solid "+(p.value?"var(--coral)":"#22C55E"))},[m[10]||(m[10]=t("div",{class:"section-label mb-2"},"Failures",-1)),t("div",{class:D(["big-num text-2xl",p.value?"text-red-400":"text-green-400"])},d(p.value||"None"),3),t("div",_s,d(p.value?"Check errors":"All nominal"),1)],4)],64)):(l(),i(S,{key:0},[t("div",Ze,[m[1]||(m[1]=t("div",{class:"section-label mb-2"},"Fastest",-1)),t("div",Xe,[M(d(b.value.tokens_per_second.toFixed(1))+" ",1),m[0]||(m[0]=t("span",{class:"text-xs font-normal",style:{color:"var(--lime)"}},"tok/s",-1))]),t("div",Ye,d(b.value.model),1)]),t("div",ts,[m[3]||(m[3]=t("div",{class:"section-label mb-2"},"Best TTFT",-1)),t("div",es,[M(d(a.value.ttft_ms.toFixed(0)),1),m[2]||(m[2]=t("span",{class:"text-xs font-normal text-zinc-500"},"ms",-1))]),t("div",ss,d(a.value.model),1)]),t("div",os,[m[4]||(m[4]=t("div",{class:"section-label mb-2"},"Models",-1)),t("div",ns,d(c.value),1),t("div",rs,d(f.value)+" total runs",1)]),t("div",{class:"stat-card card rounded-sm p-4",style:w("border-left: 3px solid "+(y.value>0?"#FB923C":"#22C55E"))},[m[5]||(m[5]=t("div",{class:"section-label mb-2"},"Total Cost",-1)),t("div",ls,d(y.value>0?"$"+y.value.toFixed(4):"$0"),1),t("div",is,d(p.value?p.value+" failure(s)":"All nominal"),1)],4)],64))])):T("",!0),_.value?(l(),i("div",ks,[m[11]||(m[11]=t("div",null,"All benchmarks failed. Check your API keys and model configuration.",-1)),x.value.length?(l(),i("div",hs,[(l(!0),i(S,null,N(x.value,(P,O)=>(l(),i("div",{key:O,class:"text-[11px] font-mono mt-1 cursor-pointer",style:{color:"#FCA5A5","word-break":"break-word"},onClick:L=>k(P)},d(P),9,$s))),128))])):T("",!0)])):T("",!0),o.value&&!_.value?(l(),i(S,{key:2},[t("div",Cs,[F(_e,{results:v.results,"is-stress-mode":v.isStressMode},null,8,["results","is-stress-mode"]),F($e,{results:v.results,"is-stress-mode":v.isStressMode},null,8,["results","is-stress-mode"])]),F(Se,{results:v.results},null,8,["results"])],64)):T("",!0),o.value&&!_.value?(l(),i("div",Ts,[t("button",{class:"text-[11px] font-display tracking-wider uppercase px-4 py-2 rounded-sm transition-colors text-zinc-500 hover:text-zinc-300",style:{background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-subtle)"},onClick:E}," Export CSV ")])):T("",!0),o.value?(l(),W(Ge,{key:4,results:v.results,"is-stress-mode":v.isStressMode},null,8,["results","is-stress-mode"])):T("",!0)]))}},Bs={class:"max-w-7xl mx-auto px-6 py-8"},ws={key:0,class:"text-center py-16"},Fs={key:1,class:"error-banner mb-6"},zs={class:"mb-6"},As={class:"flex items-center justify-between mb-4"},Ms={class:"text-xs font-mono text-zinc-600"},Rs={class:"mb-6"},Es={class:"mb-6 flex items-center gap-4"},Os={key:0,class:"text-xs text-zinc-600"},Ns={key:0,class:"error-banner mb-6"},Ps={key:1,class:"mb-6"},Ls={key:2,class:"mb-6"},Us={__name:"BenchmarkPage",setup(v){const s=rt(),o=j(),{showToast:_}=xt(),b=K(!1),a=h(()=>o.currentResults.length>0),{connect:c,disconnect:f}=mt(()=>{const e=location.protocol==="https:"?"wss:":"ws:",n=vt();return`${e}//${location.host}/ws?token=${encodeURIComponent(n)}`},{onMessage(e){if(o.handleJobEvent(e),e.type==="sync")for(const n of e.active_jobs||[])n.job_type==="benchmark"&&["running","pending","queued"].includes(n.status)&&o.restoreRunningJob(n)}});async function p(){b.value=!1;try{await s.loadConfig(),o.applyDefaults(s.config),o.selectAllFromConfig(s.config),o.replayPendingInit(),s.loadParamsRegistry(),o.loadPromptTemplates()}catch(e){console.error("Failed to load config:",e),b.value=!0}}async function y(){try{const e=await o.startBenchmark();_("Benchmark submitted","success")}catch(e){_(e.message||"Benchmark failed","error")}}function r(){o.errorBanner=null,o.lastBenchmarkBody&&o.startBenchmark(o.lastBenchmarkBody).catch(e=>{_(e.message||"Retry failed","error")})}return ut(()=>{p(),c()}),pt(()=>{f()}),(e,n)=>(l(),i("div",Bs,[u(s).loading?(l(),i("div",ws,[...n[0]||(n[0]=[t("div",{class:"text-zinc-500 text-sm"},"Loading configuration...",-1)])])):b.value?(l(),i("div",Fs,[n[1]||(n[1]=t("div",null,"Failed to load configuration. Check your connection and refresh.",-1)),t("button",{onClick:p},"Retry")])):u(s).config?(l(),i(S,{key:2},[t("div",zs,[t("div",As,[n[2]||(n[2]=t("h2",{class:"section-label"},"Select Models",-1)),t("span",Ms,d(u(o).selectedCount)+" selected ",1)]),F(Ft,{providers:u(s).providers,"selected-models":u(o).selectedModels,onToggle:u(o).toggleModel,onSelectAll:u(o).selectAll,onSelectNone:u(o).selectNone,onToggleProvider:u(o).toggleProviderModels},null,8,["providers","selected-models","onToggle","onSelectAll","onSelectNone","onToggleProvider"])]),t("div",Rs,[F(Qt)]),t("div",Es,[F(At,{disabled:u(o).isRunning||u(o).selectedCount===0,running:u(o).isRunning,onClick:y},null,8,["disabled","running"]),u(o).selectedCount===0?(l(),i("span",Os," Select at least one model to run ")):T("",!0)]),u(o).errorBanner?(l(),i("div",Ns,[t("div",null,d(u(o).errorBanner),1),u(o).lastBenchmarkBody?(l(),i("button",{key:0,onClick:r}," Retry ")):T("",!0)])):T("",!0),u(o).isRunning?(l(),i("div",Ps,[F(ge)])):T("",!0),a.value?(l(),i("div",Ls,[F(Ss,{results:u(o).aggregatedResults,"is-stress-mode":u(o).isStressMode},null,8,["results","is-stress-mode"])])):T("",!0)],64)):T("",!0)]))}};export{Us as default};

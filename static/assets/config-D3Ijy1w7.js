import{S as h,r as i,B as d,s as a}from"./index-B7jY00Un.js";const k=h("config",()=>{const e=i(null),s=i(!1),c=i(null),p=d(()=>{var o;return(o=e.value)!=null&&o.providers?Object.entries(e.value.providers).map(([r,n])=>({name:r,...n,models:t(n)})):[]}),v=d(()=>{var r;if(!((r=e.value)!=null&&r.providers))return[];const o=[];for(const[n,l]of Object.entries(e.value.providers)){const w=t(l),f=l.provider_key||n;for(const u of w)o.push({...u,provider:n,provider_key:f,compoundKey:f+"::"+u.model_id})}return o});function t(o){return Array.isArray(o)?o:o.models||[]}async function y(){s.value=!0;try{const o=await a("/api/config");if(!o.ok)throw new Error("Failed to load config");e.value=await o.json()}finally{s.value=!1}}async function g(o){const r=await a("/api/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok)throw new Error("Failed to save config");e.value=await r.json()}async function m(){try{const o=await a("/api/param-support/registry");o.ok&&(c.value=await o.json())}catch{}}return{config:e,loading:s,providers:p,allModels:v,providerParamsRegistry:c,getProviderModels:t,loadConfig:y,saveConfig:g,loadParamsRegistry:m}});export{k as u};

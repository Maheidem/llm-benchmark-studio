import{u as z,r as o,o as B,c as l,d as s,m as R,k as u,i as b,j as f,g as N,t as y,f as x,h as k,v as g,l as P,C as V,a as C,b as n}from"./index-DQrEf9q5.js";const q={class:"min-h-screen flex items-center justify-center",style:{background:"var(--bg-base, #09090b)"}},M={class:"modal-box",style:{"max-width":"380px",width:"100%"}},T={key:0,class:"error-banner mb-4"},U={class:"mt-2"},j={key:1},D={key:0,class:"error-banner mb-4"},E=["disabled"],A=["disabled"],I=["disabled"],H={key:3,class:"text-center",style:{"font-size":"12px"}},F={__name:"ResetPassword",setup(K){const h=V(),_=z(),d=o(h.query.token||""),r=o(""),c=o(""),a=o(""),t=o(!1),p=o(!1),w=o(null);B(()=>{var i;d.value&&((i=w.value)==null||i.focus())});async function S(){if(a.value="",r.value!==c.value){a.value="Passwords do not match.";return}if(r.value.length<8){a.value="Password must be at least 8 characters.";return}t.value=!0;try{await _.resetPassword(d.value,r.value),p.value=!0}catch(i){a.value=i.message||"Reset failed. The link may have expired."}finally{t.value=!1}}return(i,e)=>{const m=C("router-link");return n(),l("div",q,[s("div",M,[e[9]||(e[9]=R('<div class="flex items-center gap-2 mb-6"><div class="w-8 h-8 rounded-sm flex items-center justify-center font-display font-bold text-xs" style="background:var(--lime);color:#09090B;"> B<span style="font-size:9px;opacity:0.6;">s</span></div><span class="font-display font-bold text-sm text-zinc-100 tracking-wide"> BENCHMARK <span style="color:var(--lime);">STUDIO</span></span></div><h2 class="section-title mb-1" style="font-size:16px;">Set new password</h2><p class="text-zinc-400 mb-5" style="font-size:12px;"> Enter your new password below. </p>',3)),d.value?p.value?(n(),l("div",j,[e[5]||(e[5]=s("div",{class:"rounded p-4 mb-4 text-sm",style:{background:"rgba(132,204,22,0.1)",border:"1px solid rgba(132,204,22,0.3)",color:"#a3e635"}}," Password updated successfully! ",-1)),b(m,{to:"/login",class:"modal-btn modal-btn-confirm block w-full text-center"},{default:f(()=>[...e[4]||(e[4]=[u(" Back to login ",-1)])]),_:1})])):(n(),l("form",{key:2,onSubmit:N(S,["prevent"])},[a.value?(n(),l("div",D,y(a.value),1)):x("",!0),e[6]||(e[6]=s("label",{class:"section-label block mb-1"},"New password",-1)),k(s("input",{ref_key:"passwordRef",ref:w,"onUpdate:modelValue":e[0]||(e[0]=v=>r.value=v),type:"password",class:"modal-input mb-3",required:"",minlength:"8",placeholder:"Min 8 characters",autocomplete:"new-password",disabled:t.value},null,8,E),[[g,r.value]]),e[7]||(e[7]=s("label",{class:"section-label block mb-1"},"Confirm password",-1)),k(s("input",{"onUpdate:modelValue":e[1]||(e[1]=v=>c.value=v),type:"password",class:"modal-input mb-4",required:"",minlength:"8",placeholder:"Repeat your password",autocomplete:"new-password",disabled:t.value},null,8,A),[[g,c.value]]),s("button",{type:"submit",disabled:t.value,class:"modal-btn modal-btn-confirm w-full text-center mb-4",style:P({opacity:t.value?.6:1})},y(t.value?"Updating...":"Set new password"),13,I)],32)):(n(),l("div",T,[e[3]||(e[3]=u(" Invalid or missing reset link. Please request a new one. ",-1)),s("div",U,[b(m,{to:"/forgot-password",class:"underline"},{default:f(()=>[...e[2]||(e[2]=[u("Request reset link",-1)])]),_:1})])])),!p.value&&d.value?(n(),l("div",H,[b(m,{to:"/login",class:"text-zinc-400 hover:text-zinc-200 transition-colors"},{default:f(()=>[...e[8]||(e[8]=[u(" Back to login ",-1)])]),_:1})])):x("",!0)])])}}};export{F as default};

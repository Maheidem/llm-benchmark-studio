import{o as E,c as l,x as y,d as t,f as m,F as g,A as k,g as L,t as c,h as x,z as T,v as b,P as q,r as h,Q as J,K,b as a,l as H,M as Q}from"./index-BqpQFpv6.js";import{u as G}from"./profiles-DZkAa5Kq.js";import{u as R}from"./config-BfwCPMKT.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={key:0,class:"text-zinc-600 text-sm font-body"},Y={key:1,class:"space-y-6"},Z={class:"flex items-center justify-between"},I={key:0,class:"card rounded-md px-5 py-8 text-center text-zinc-600 text-xs font-body"},ee={class:"px-5 py-3 flex items-center justify-between",style:{"border-bottom":"1px solid var(--border-subtle)"}},te=["title"],se=["onClick"],oe={class:"divide-y",style:{"border-color":"var(--border-subtle)"}},ne={class:"flex-1 min-w-0"},re={class:"flex items-center gap-2 flex-wrap"},le={class:"text-xs font-body text-zinc-200"},ae={key:0,class:"text-[9px] font-display tracking-wider uppercase px-1.5 py-0.5 rounded-sm",style:{background:"rgba(191,255,0,0.08)",color:"var(--lime)",border:"1px solid rgba(191,255,0,0.2)"}},ie={key:0,class:"text-[10px] text-zinc-600 font-body mt-0.5 truncate"},de={key:1,class:"text-[10px] font-mono text-zinc-700 mt-0.5 truncate"},ce={class:"text-[9px] text-zinc-700 font-body mt-0.5"},ue={class:"flex items-center gap-2 shrink-0"},pe=["onClick"],me=["onClick"],fe=["onClick"],xe={class:"w-full max-w-lg rounded-md overflow-hidden",style:{background:"var(--surface)",border:"1px solid var(--border-subtle)"}},ye={class:"px-5 py-4",style:{"border-bottom":"1px solid var(--border-subtle)"}},be={class:"section-label"},ve={class:"px-5 py-4 space-y-4 max-h-[70vh] overflow-y-auto"},_e={key:0},ge=["value"],ke={class:"flex items-center justify-between mb-2"},he={class:"space-y-2"},we=["onUpdate:modelValue"],Pe=["onUpdate:modelValue"],ze=["onClick"],Ce={key:0,class:"text-[10px] text-zinc-700 font-body"},je={class:"flex items-center gap-2"},De={class:"px-5 py-4 flex items-center justify-end gap-3",style:{"border-top":"1px solid var(--border-subtle)"}},Se=["disabled"],Me={__name:"ProfilesPanel",setup(Ne){const d=G(),w=R(),{showToast:u}=K(),{confirm:D}=Q(),v=h(!1),p=h(null),_=h(!1),n=J({model_id:"",name:"",description:"",system_prompt:"",is_default:!1}),f=h([]);function P(s){if(!s)return{};if(typeof s=="object")return s;try{return JSON.parse(s)}catch{return{}}}function S(s){const e=P(s);return Object.entries(e).map(([o,i])=>`${o}=${i}`).join(", ")}function M(s){if(!s)return"";try{return new Date(s).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch{return s}}function N(s){const e={manual:"background:rgba(113,113,122,0.12);color:#71717A;border:1px solid rgba(113,113,122,0.2)",param_tuner:"background:rgba(56,189,248,0.08);color:#38BDF8;border:1px solid rgba(56,189,248,0.2)",prompt_tuner:"background:rgba(168,85,247,0.08);color:#A855F7;border:1px solid rgba(168,85,247,0.2)",import:"background:rgba(251,146,60,0.08);color:#FB923C;border:1px solid rgba(251,146,60,0.2)"};return e[s]||e.manual}function $(){f.value.push({key:"",value:""})}function V(s){f.value.splice(s,1)}function C(s=""){p.value=null,n.model_id=s,n.name="",n.description="",n.system_prompt="",n.is_default=!1,f.value=[],v.value=!0}function U(s){p.value=s,n.name=s.name,n.description=s.description||"",n.system_prompt=s.system_prompt||"",n.is_default=!!s.is_default;const e=P(s.params_json);f.value=Object.entries(e).map(([o,i])=>({key:o,value:String(i)})),v.value=!0}function z(){v.value=!1,p.value=null}function A(){const s={};for(const e of f.value){const o=e.key.trim();if(!o)continue;const i=e.value.trim();i==="true"?s[o]=!0:i==="false"?s[o]=!1:i!==""&&!isNaN(Number(i))?s[o]=Number(i):s[o]=i}return s}async function B(){if(!p.value&&!n.model_id.trim()){u("Model ID is required","error");return}if(!n.name.trim()){u("Name is required","error");return}_.value=!0;try{const s=A();p.value?(await d.updateProfile(p.value.id,{name:n.name.trim(),description:n.description.trim()||null,system_prompt:n.system_prompt.trim()||null,is_default:n.is_default,params_json:s}),u("Profile updated","success")):(await d.createProfile({model_id:n.model_id.trim(),name:n.name.trim(),description:n.description.trim()||"",system_prompt:n.system_prompt.trim()||null,is_default:n.is_default,params_json:s,origin_type:"manual"}),u("Profile created","success")),z(),await d.fetchProfiles()}catch(s){u(s.message,"error")}finally{_.value=!1}}async function O(s){try{await d.setDefault(s.id),u("Default updated","success")}catch(e){u(e.message,"error")}}async function F(s){if(await D("Delete Profile",`Delete profile <strong>${s.name}</strong>? This cannot be undone.`,{danger:!0,confirmLabel:"Delete"}))try{await d.deleteProfile(s.id),u("Profile deleted","success")}catch(o){u(o.message,"error")}}return E(()=>{d.fetchProfiles(),w.config||w.loadConfig()}),(s,e)=>(a(),l("div",null,[y(d).loading&&y(d).profiles.length===0?(a(),l("div",X," Loading profiles... ")):(a(),l("div",Y,[t("div",Z,[e[10]||(e[10]=t("p",{class:"text-[11px] text-zinc-600 font-body"}," Profiles store saved parameter sets and system prompts for a model. ",-1)),t("button",{onClick:e[0]||(e[0]=o=>C()),class:"text-[10px] font-display tracking-wider uppercase px-3 py-1.5 rounded-sm transition-colors",style:{color:"var(--lime)",border:"1px solid rgba(191,255,0,0.2)"}}," + New Profile ")]),Object.keys(y(d).profilesByModel).length===0?(a(),l("div",I," No profiles yet. Create one to save parameter sets and system prompts for a model. ")):m("",!0),(a(!0),l(g,null,k(y(d).profilesByModel,(o,i)=>(a(),l("div",{key:i,class:"card rounded-md overflow-hidden"},[t("div",ee,[t("span",{class:"section-label truncate",title:i},c(i),9,te),t("button",{onClick:r=>C(i),class:"text-[9px] font-display tracking-wider uppercase px-2 py-0.5 rounded-sm transition-colors text-zinc-500 hover:text-zinc-300",style:{border:"1px solid var(--border-subtle)"}},"+ Add",8,se)]),t("div",oe,[(a(!0),l(g,null,k(o,r=>(a(),l("div",{key:r.id,class:"px-5 py-3 flex items-start justify-between gap-4 group"},[t("div",ne,[t("div",re,[t("span",le,c(r.name),1),r.is_default?(a(),l("span",ae,"DEFAULT")):m("",!0),t("span",{class:"text-[9px] font-display tracking-wider uppercase px-1.5 py-0.5 rounded-sm",style:H(N(r.origin_type))},c(r.origin_type),5)]),r.description?(a(),l("p",ie,c(r.description),1)):m("",!0),r.params_json&&Object.keys(P(r.params_json)).length>0?(a(),l("p",de,c(S(r.params_json)),1)):m("",!0),t("p",ce,c(M(r.created_at)),1)]),t("div",ue,[r.is_default?m("",!0):(a(),l("button",{key:0,onClick:j=>O(r),class:"text-[10px] font-display tracking-wider uppercase text-zinc-600 hover:text-zinc-300 transition-colors"},"Set Default",8,pe)),t("button",{onClick:j=>U(r),class:"text-[10px] font-display tracking-wider uppercase text-zinc-500 hover:text-zinc-200 transition-colors"},"Edit",8,me),t("button",{onClick:j=>F(r),class:"text-[10px] font-display tracking-wider uppercase text-zinc-600 hover:text-red-400 transition-colors"},"Delete",8,fe)])]))),128))])]))),128))])),v.value?(a(),l("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0,0,0,0.6)"},onClick:e[9]||(e[9]=L(o=>z(),["self"]))},[t("div",xe,[t("div",ye,[t("span",be,c(p.value?"Edit Profile":"New Profile"),1)]),t("div",ve,[p.value?m("",!0):(a(),l("div",_e,[e[12]||(e[12]=t("label",{class:"field-label"},"Model *",-1)),x(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.model_id=o),class:"settings-input"},[e[11]||(e[11]=t("option",{value:"",disabled:""},"Select a model...",-1)),(a(!0),l(g,null,k(y(w).allModels,o=>(a(),l("option",{key:o.compoundKey,value:o.model_id},c(o.display_name||o.model_id)+" ("+c(o.provider)+") ",9,ge))),128))],512),[[T,n.model_id]])])),t("div",null,[e[13]||(e[13]=t("label",{class:"field-label"},"Name *",-1)),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.name=o),type:"text",placeholder:"e.g. High Accuracy",class:"settings-input"},null,512),[[b,n.name]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"field-label"},"Description",-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.description=o),type:"text",placeholder:"Optional description",class:"settings-input"},null,512),[[b,n.description]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"field-label"},"System Prompt",-1)),x(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>n.system_prompt=o),rows:"3",placeholder:"Optional system prompt override",class:"w-full px-3 py-2 rounded-sm text-xs font-mono text-zinc-200",style:{background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-subtle)",outline:"none",resize:"vertical"}},null,512),[[b,n.system_prompt]])]),t("div",null,[t("div",ke,[e[16]||(e[16]=t("label",{class:"field-label"},"Parameters",-1)),t("button",{onClick:e[5]||(e[5]=o=>$()),class:"text-[9px] font-display tracking-wider uppercase text-zinc-500 hover:text-zinc-300 transition-colors"},"+ Add")]),t("div",he,[(a(!0),l(g,null,k(f.value,(o,i)=>(a(),l("div",{key:i,class:"flex gap-2 items-center"},[x(t("input",{"onUpdate:modelValue":r=>o.key=r,type:"text",placeholder:"key",class:"settings-input flex-1"},null,8,we),[[b,o.key]]),x(t("input",{"onUpdate:modelValue":r=>o.value=r,type:"text",placeholder:"value",class:"settings-input flex-1"},null,8,Pe),[[b,o.value]]),t("button",{onClick:r=>V(i),class:"text-[10px] text-zinc-600 hover:text-red-400 transition-colors shrink-0"},"x",8,ze)]))),128)),f.value.length===0?(a(),l("p",Ce,' No parameters. Click "+ Add" to add key-value pairs. ')):m("",!0)])]),t("div",je,[x(t("input",{id:"is-default","onUpdate:modelValue":e[6]||(e[6]=o=>n.is_default=o),type:"checkbox",class:"accent-lime-400"},null,512),[[q,n.is_default]]),e[17]||(e[17]=t("label",{for:"is-default",class:"text-xs font-body text-zinc-400 cursor-pointer"}," Set as default for this model ",-1))])]),t("div",De,[t("button",{onClick:e[7]||(e[7]=o=>z()),class:"text-[10px] font-display tracking-wider uppercase text-zinc-500 hover:text-zinc-300 px-3 py-1.5 transition-colors"},"Cancel"),t("button",{onClick:e[8]||(e[8]=o=>B()),disabled:_.value,class:"text-[10px] font-display tracking-wider uppercase px-3 py-1.5 rounded-sm transition-colors disabled:opacity-50",style:{color:"var(--lime)",border:"1px solid rgba(191,255,0,0.2)"}},c(_.value?"Saving...":"Save"),9,Se)])])])):m("",!0)]))}},Be=W(Me,[["__scopeId","data-v-2fe42da7"]]);export{Be as default};

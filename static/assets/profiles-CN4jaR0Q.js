import{S as m,r as n,B as j,s as i}from"./index-DJOpZm09.js";const P=m("profiles",()=>{const a=n([]),l=n(null),s=n(!1),f=j(()=>{const o={};for(const e of a.value)o[e.model_id]||(o[e.model_id]=[]),o[e.model_id].push(e);return o});async function c(o=null){s.value=!0;try{const e=o?`/api/profiles/${encodeURIComponent(o)}`:"/api/profiles",t=await i(e);if(!t.ok)throw new Error("Failed to fetch profiles");const r=await t.json();a.value=r.profiles||[]}finally{s.value=!1}}async function p(o){const e=await i(`/api/profiles/detail/${o}`);if(!e.ok)throw new Error("Profile not found");const t=await e.json();return l.value=t,t}async function d(o){const e=await i("/api/profiles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(e.status===409){const t=await e.json().catch(()=>({}));throw new Error(t.error||"A profile with this name already exists")}if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.error||`Failed to create profile (${e.status})`)}return await e.json()}async function u(o,e){const t=await i(`/api/profiles/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.status===409){const r=await t.json().catch(()=>({}));throw new Error(r.error||"A profile with this name already exists")}if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(r.error||`Failed to update profile (${t.status})`)}return await t.json()}async function w(o){if(!(await i(`/api/profiles/${o}`,{method:"DELETE"})).ok)throw new Error("Failed to delete profile");a.value=a.value.filter(t=>t.id!==o)}async function h(o){if(!(await i(`/api/profiles/${o}/set-default`,{method:"POST"})).ok)throw new Error("Failed to set default");const t=a.value.find(r=>r.id===o);if(t)for(const r of a.value)r.model_id===t.model_id&&(r.is_default=r.id===o)}async function y(o){const e=await i("/api/profiles/from-tuner",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(e.status===409){const t=await e.json().catch(()=>({}));throw new Error(t.error||"A profile with this name already exists")}if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.error||`Failed to create profile (${e.status})`)}return await e.json()}return{profiles:a,selectedProfile:l,loading:s,profilesByModel:f,fetchProfiles:c,fetchProfile:p,createProfile:d,updateProfile:u,deleteProfile:w,setDefault:h,createFromTuner:y}});export{P as u};

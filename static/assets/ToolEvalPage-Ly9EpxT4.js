import{b as r,c as s,d,x as a,t as p,f as i,l as S,F as h,B as m,r as $,o as F,A as z,i as C,C as j,q as A,a as B,e as N,s as M,n as H,M as I,K as L}from"./index-Csqbeob9.js";import{u as w,a as O}from"./useSharedContext-P5pYt6Pj.js";const J={key:0,class:"te-context-bar",style:{position:"relative"}},R={key:0,class:"ctx-pill"},U={key:1,class:"ctx-pill"},V={__name:"ContextBar",emits:["toggleExperiment","newExperiment","showSystemPrompt"],setup(_){const{context:t}=w(),u=$(!1),y=m(()=>t.suiteId||t.selectedModels.length>0||t.experimentId),f=m(()=>{const o=t.systemPrompts;return o?typeof o=="string"?o.trim().length>0:typeof o=="object"?Object.values(o).some(e=>e&&e.trim()):!1:!1}),k=m(()=>{const o=t.systemPrompts;if(!o||typeof o!="object")return"System Prompt";let e=0;for(const[l,x]of Object.entries(o))x&&x.trim()&&l!=="_global"&&e++;return e>0?`System Prompt (${e} model${e>1?"s":""})`:"System Prompt"}),T={param_tuner:"from Param Tuner",prompt_tuner:"from Prompt Tuner",judge:"from Judge"},b={param_tuner:{bg:"rgba(99,102,241,0.1)",border:"rgba(99,102,241,0.25)",text:"#818CF8"},prompt_tuner:{bg:"rgba(168,85,247,0.1)",border:"rgba(168,85,247,0.25)",text:"#A855F7"},judge:{bg:"rgba(245,158,11,0.1)",border:"rgba(245,158,11,0.25)",text:"#F59E0B"}},E=m(()=>T[t.lastUpdatedBy]||"from "+t.lastUpdatedBy),P=m(()=>{const o=b[t.lastUpdatedBy]||{bg:"rgba(255,255,255,0.04)",border:"rgba(255,255,255,0.08)",text:"#A1A1AA"};return{background:o.bg,borderColor:o.border,color:o.text}});return(o,e)=>(r(),s(h,null,[y.value&&!u.value?(r(),s("div",J,[e[5]||(e[5]=d("span",{class:"text-[10px] text-zinc-600 font-display tracking-wider uppercase"},"Context:",-1)),a(t).suiteId?(r(),s("span",R,p(a(t).suiteName||"Suite"),1)):i("",!0),a(t).selectedModels.length>0?(r(),s("span",U,p(a(t).selectedModels.length)+" model"+p(a(t).selectedModels.length>1?"s":""),1)):i("",!0),a(t).experimentId?(r(),s("span",{key:2,class:"ctx-pill active",style:{cursor:"pointer"},onClick:e[0]||(e[0]=l=>o.$emit("toggleExperiment"))},p(a(t).experimentName||"Experiment"),1)):i("",!0),a(t).suiteId&&!a(t).experimentId?(r(),s("button",{key:3,onClick:e[1]||(e[1]=l=>o.$emit("newExperiment")),class:"text-[10px] px-1.5 py-0.5 rounded-sm",style:{background:"rgba(191,255,0,0.08)",border:"1px solid rgba(191,255,0,0.2)",color:"var(--lime)",cursor:"pointer"},title:"New Experiment"},"+")):i("",!0),f.value?(r(),s("span",{key:4,class:"ctx-pill",style:{background:"rgba(168,85,247,0.1)","border-color":"rgba(168,85,247,0.25)",color:"#A855F7",cursor:"pointer"},onClick:e[2]||(e[2]=l=>o.$emit("showSystemPrompt"))},p(k.value),1)):i("",!0),a(t).lastUpdatedBy?(r(),s("span",{key:5,class:"ctx-pill",style:S(P.value)},p(E.value),5)):i("",!0),d("button",{onClick:e[3]||(e[3]=l=>u.value=!0),class:"ml-auto text-[10px] text-zinc-700 hover:text-zinc-500",style:{background:"none",border:"none",cursor:"pointer"}},"Hide")])):i("",!0),y.value&&u.value?(r(),s("button",{key:1,onClick:e[4]||(e[4]=l=>u.value=!1),class:"text-[10px] text-zinc-700 hover:text-zinc-500 px-4 py-1",style:{background:"none",border:"none",cursor:"pointer"}},"Show Context")):i("",!0)],64))}},q={class:"max-w-7xl mx-auto px-6 py-8"},D={class:"flex items-center overflow-x-auto",style:{"border-bottom":"1px solid var(--border-subtle, rgba(255,255,255,0.06))"}},K=["onClick"],G={class:"mt-6"},Y={__name:"ToolEvalPage",setup(_){const t=j(),u=A(),y=O(),{inputModal:f}=I(),{context:k,setExperiment:T}=w(),{showToast:b}=L();F(()=>{y.loadContext()});const E=[{key:"suites",label:"Suites",route:"ToolEvalSuites"},{key:"evaluate",label:"Evaluate",route:"ToolEvalEvaluate"},{key:"param-tuner",label:"Param Tuner",route:"ParamTunerConfig"},{key:"prompt-tuner",label:"Prompt Tuner",route:"PromptTunerConfig"},{key:"auto-optimize",label:"Auto-Optimize",route:"AutoOptimize"},{key:"prompt-library",label:"Prompt Library",route:"PromptLibrary"},{key:"judge",label:"Judge",route:"JudgeHistory"},{key:"timeline",label:"Timeline",route:"Timeline"},{key:"history",label:"History",route:"ToolEvalHistory"}],P={ToolEvalSuites:"suites",ToolEvalEditor:"suites",ToolEvalEvaluate:"evaluate",ParamTunerConfig:"param-tuner",ParamTunerRun:"param-tuner",ParamTunerHistory:"param-tuner",PromptTunerConfig:"prompt-tuner",PromptTunerRun:"prompt-tuner",PromptTunerHistory:"prompt-tuner",AutoOptimize:"auto-optimize",PromptLibrary:"prompt-library",JudgeHistory:"judge",JudgeCompare:"judge",Timeline:"timeline",ToolEvalHistory:"history"},o=m(()=>P[t.name]||"suites");function e(n){u.push({name:n.route})}async function l(){await u.push({name:"ToolEvalEvaluate"}),await H(),setTimeout(()=>{const n=document.querySelector('[data-section="system-prompt"]');n&&n.scrollIntoView({behavior:"smooth",block:"start"})},100)}async function x(){const n=await f("New Experiment","Enter experiment name:");if(n)try{const c=await M("/api/experiments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,suite_id:k.suiteId||null})});if(!c.ok)throw new Error("Failed to create experiment");const g=await c.json();T(g.id,g.name||n),b("Experiment created","success")}catch(c){b(c.message||"Failed to create experiment","error")}}return(n,c)=>{const g=B("router-view");return r(),s("div",q,[d("div",D,[(r(),s(h,null,z(E,v=>d("button",{key:v.key,class:N(["te-subtab",{"te-subtab-active":o.value===v.key}]),onClick:Q=>e(v)},p(v.label),11,K)),64))]),C(V,{onShowSystemPrompt:l,onNewExperiment:x}),d("div",G,[C(g)])])}}};export{Y as default};
